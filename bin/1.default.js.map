{"version":3,"sources":["webpack:///./client/pf/default.js","webpack:///./client/tongji.js"],"names":["tongji","window","require","_noop","pay","orderid","money","desc","cb","tipon","beginCharge","getAjax","err","r","responseText","popup","endCharge","share","console","log","preShareResult","roomid","setnum","participants","winners","img","arguments","noop","Stat","_delayOp","_inited","key","self","loadScript","i","l","length","op","f","apply","p","push","me","_delay","qudao","cordova","o","device","platform","startup_param","pf","TDGA","Account","accountId","id","level","accountName","nickname","gameServer","accountType","gender","sex","onPageLeave","bind","n","setLevel","reason","onReward","tickets","payment","Math","floor","onChargeRequest","orderId","iapId","currencyAmount","currencyType","virtualCurrencyAmount","paymentType","onChargeSuccess","tableid","onMissionBegin","toString","name","onItemPurchase","item","itemNumber","priceInVirtualCurrency","onMissionCompleted","onEvent","user","tabledesc","table","msg","data","onunload","userout","module","exports"],"mappings":"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","file":"1.default.js?21c9ecdc430d42daed26","sourcesContent":["var tongji=window.tongji=require('../tongji.js');\r\n\r\nfunction _noop() {}\r\n// function getAjax(url, data, callback) {\r\n// \tif (typeof data ==='function') {\r\n// \t\tcallback =data;\r\n// \t\tdata=null;\r\n// \t}\r\n// \tif (!callback) callback=function(){};\r\n// \t$.ajax({\r\n// \t\ttype: \"POST\",\r\n// \t\turl: url,\r\n// \t\tdataType: \"JSON\",\r\n// \t\tdata: data,\r\n// \t\ttimeout:30000,\r\n// \t\tsuccess: function (chunk) {\r\n// \t\t\treturn callback(null, chunk);\r\n// \t\t},\r\n// \t\terror: function (e) {\r\n// \t\t\t//if (typeof console == \"object\") console.log(e);\r\n// \t\t\tcallback(e);\r\n// \t\t}\r\n// \t})\r\n// }\r\nwindow.pay=function(orderid, money, desc, cb) {\r\n\t!cb && (cb=_noop);\r\n\tif (tipon) {\r\n\t\ttongji.beginCharge(orderid, money, desc, '测试通道');\r\n\t\treturn getAjax('pf/default/pay', {orderid:orderid, money:money}, function(err, r) {\r\n\t\t\tif (err) return tipon(err.responseText).popup(cb);\r\n\t\t\ttipon('测试版，直接为您增加房卡').popup(cb);\r\n\t\t\ttongji.endCharge(orderid, '测试通道');\r\n\t\t})\r\n\t}\r\n\tcb();\r\n}\r\nwindow.share=function() {\r\n\tconsole.log('share');\r\n}\r\nwindow.preShareResult=function(roomid, setnum, participants, winners, img) {\r\n\tconsole.log('shareContent', arguments);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./client/pf/default.js","function noop(){}\r\n\r\nclass Stat {\r\n\tconstructor() {\r\n\t\tthis._delayOp=[];\r\n\t\tthis._inited=true;\r\n\t}\r\n\tinit(key) {\r\n\t\tthis._inited=true;\r\n\t\treturn;\r\n\t\tvar self=this;\r\n\t\tloadScript('http://sdk.talkingdata.com/g/h5/v1/'+key, function(err) {\r\n\t\t\tself._inited=true;\r\n\t\t\tfor (var i=0, l=self._delayOp.length; i<l; i++) {\r\n\t\t\t\tvar op=self._delayOp[i];\r\n\t\t\t\top.f.apply(self, op.p);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t_delay(f) {\r\n\t\tif (!this._inited) {\r\n\t\t\treturn this._delayOp.push({f:f});\r\n\t\t}\r\n\t\tf();\r\n\t}\r\n\tuserin(me) {\r\n\t\tthis._delay(function() {\r\n\t\t\tvar qudao=0;\r\n\t\t\tif (!!window.cordova) {\r\n\t\t\t\tvar o={\"Android\":1, \"BlackBerry 10\":2, \"browser\":3, \"iOS\":4,  \"WinCE\":5, \"Tizen\":6, \"Mac OS X\":7};\r\n\t\t\t\tqudao=o[device.platform]||8;\r\n\t\t\t}\r\n\t\t\telse if (startup_param.pf=='wechat') qudao=101;\r\n\t\t\tTDGA.Account({\r\n\t\t\t\taccountId : me.id,\r\n\t\t\t\tlevel : me.level,\r\n\t\t\t\taccountName:me.nickname,\r\n\t\t\t\tgameServer : '通用',\r\n\t\t\t\taccountType : qudao,\r\n\t\t\t\tgender : startup_param.sex\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tuserout() {\r\n\t\tthis._delay(TDGA.onPageLeave.bind(TDGA));\r\n\t}\r\n\tlevelup(n) {\r\n\t\tthis._delay(TDGA.Account.setLevel.bind(TDGA.Account,n));\r\n\t}\r\n\treward(n, reason) {\r\n\t\tthis._delay(TDGA.onReward.bind(TDGA, n, reason));\r\n\t}\r\n\tbeginCharge(orderid, money, tickets, desc, payment) {\r\n\t\tif (typeof tickets=='string') {\r\n\t\t\tpayment=desc;\r\n\t\t\tdesc=tickets;\r\n\t\t\ttickets=Math.floor(money/3);\r\n\t\t}\r\n\t\tthis._delay(function() {\r\n\t\t\tTDGA.onChargeRequest({\r\n\t\t\t\torderId : orderid\r\n\t\t\t\t,iapId : desc\r\n\t\t\t\t,currencyAmount : money\r\n\t\t\t\t,currencyType : 'CNY'\r\n\t\t\t\t,virtualCurrencyAmount : tickets\r\n\t\t\t\t,paymentType:payment\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tendCharge(orderid, payment) {\r\n\t\tthis._delay(function() {\r\n\t\t\tTDGA.onChargeSuccess({\r\n\t\t\t\torderId : orderid,\r\n\t\t\t\tpaymentType:payment\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tenterGame(tableid) {\r\n\t\tthis._delay(function() {\r\n\t\t\tTDGA.onMissionBegin(tableid.toString());\r\n\t\t});\r\n\t}\r\n\tstartGame(tableid, name, tickets) {\r\n\t\tthis._delay(function() {\r\n\t\t\tTDGA.onItemPurchase({item:name, itemNumber:1, priceInVirtualCurrency:tickets});\r\n\t\t});\r\n\t}\r\n\tendGame(tableid) {\r\n\t\tthis._delay(function() {\r\n\t\t\tTDGA.onMissionCompleted(tableid.toString());\r\n\t\t});\t\t\r\n\t}\r\n\tshare() {\r\n\t\tthis._delay(function() {\r\n\t\t\tTDGA.onEvent('share', {user:{id:me.id, nickname:me.nickname}});\r\n\t\t});\r\n\t}\r\n\tinvite(tableid,tabledesc) {\r\n\t\tthis._delay(function() {\r\n\t\t\tTDGA.onEvent('invite', {user:{id:me.id, nickname:me.nickname}, table:{id:tableid, msg:tabledesc}});\r\n\t\t});\r\n\t}\r\n\tevent(name, data) {\r\n\t\tthis._delay(function() {\r\n\t\t\tTDGA.onEvent(name, (typeof data=='object'?data:{data:data}));\r\n\t\t});\r\n    }\r\n}\r\n\r\nvar tongji=new Stat();\r\nwindow.onunload=tongji.userout;\r\n\r\nmodule.exports=tongji;\n\n\n// WEBPACK FOOTER //\n// ./client/tongji.js"],"sourceRoot":""}