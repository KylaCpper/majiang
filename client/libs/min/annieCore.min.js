var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},annie;!function(e){var t=function(){function e(){this._id=0,this._id=e._object_id++}return e.prototype.getInstanceId=function(){return this._id},e._object_id=0,e}();e.AObject=t;var n=function(t){function n(){t.call(this),this.eventTypes=null,this.eventTypes={}}return __extends(n,t),n.getMouseEventCount=function(e){void 0===e&&(e="");var t=0;if(""==e)for(var a in n._MECO)0==a.indexOf("onMouse")&&(t+=n._MECO[a]);else n._MECO[e]&&(t=n._MECO[e]);return t},n.prototype.addEventListener=function(e,t){if(!e)return void trace("添加侦听的type值为undefined");var n=this;n.eventTypes[e]||(n.eventTypes[e]=[]),n.eventTypes[e].indexOf(t)<0&&(n.eventTypes[e].push(t),0==e.indexOf("onMouse")&&n._changeMouseCount(e,!0))},n.prototype._changeMouseCount=function(e,t){var a=t?1:-1;n._MECO[e]||(n._MECO[e]=0),n._MECO[e]+=a,n._MECO[e]<0&&(n._MECO[e]=0),n._totalMEC+=a},n.prototype.dispatchEvent=function(t,n){void 0===n&&(n=null);var a=this;"string"==typeof t&&(t=new e.Event(t));var i=a.eventTypes[t.type];if(i){var r=i.length;null==t.target&&(t.target=a),null!=n&&(t.data=n);for(var o=0;r>o;o++)i[o](t);return!0}return!1},n.prototype.hasEventListener=function(e){return!!this.eventTypes[e]},n.prototype.removeEventListener=function(e,t){var n=this,a=n.eventTypes[e];if(a)for(var i=a.length,r=i-1;r>=0;r--)a[r]===t&&(a.splice(r,1),0==e.indexOf("onMouse")&&n._changeMouseCount(e,!1))},n.prototype.removeAllEventListener=function(){var e=this;for(var t in e.eventTypes)if(0==t.indexOf("onMouse"))for(var n=0;n<e.eventTypes[t].length;n++)e._changeMouseCount(t,!1);e.eventTypes={}},n._MECO={},n._totalMEC=0,n}(t);e.EventDispatcher=n}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t){e.call(this),this.type="",this.target=null,this.data=null,this._pd=!1,this.type=t}return __extends(t,e),t.prototype.preventDefault=function(){this._pd=!0},t.RESIZE="onResize",t.INIT_TO_STAGE="onInitStage",t.ADD_TO_STAGE="onAddToStage",t.REMOVE_TO_STAGE="onRemoveToStage",t.ENTER_FRAME="onEnterFrame",t.END_FRAME="onEndFrame",t.CALL_FRAME="onCallFrame",t.COMPLETE="onComplete",t.PROGRESS="onProgress",t.ERROR="onError",t.ABORT="onAbort",t.START="onStart",t}(e.AObject);e.Event=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t){e.call(this,t),this.clientX=0,this.clientY=0,this.stageX=0,this.stageY=0,this.localX=0,this.localY=0,this.currentTarget=null}return __extends(t,e),t.MOUSE_DOWN="onMouseDown",t.MOUSE_UP="onMouseUp",t.CLICK="onMouseClick",t.MOUSE_MOVE="onMouseMove",t.MOUSE_OVER="onMouseOver",t.MOUSE_OUT="onMouseOut",t}(e.Event);e.MouseEvent=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0),e.call(this),this.x=0,this.y=0;var a=this;a.x=t,a.y=n}return __extends(t,e),t.distance=function(e,t){return Math.sqrt(e.x*e.x*+e.y*t.y)},t}(e.AObject);e.Point=t}(annie||(annie={}));var annie;!function(e){function t(e){switch(e){case i:case-r:return 0;case a:case-a:return-1;case r:case-i:return 0;default:return Math.cos(e)}}function n(e){switch(e){case i:case-r:return 1;case a:case-a:return 0;case r:case-i:return-1;default:return Math.sin(e)}}var a=Math.PI,i=a>>1,r=a+i,o=Math.PI/180,s=function(a){function i(t,n,i,r,o,s){void 0===t&&(t=1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===s&&(s=0),a.call(this),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.transformPoint=function(t,n,a){void 0===a&&(a=null);var i=this;return a||(a=new e.Point),a.x=t*i.a+n*i.c+i.tx,a.y=t*i.b+n*i.d+i.ty,a},this.prepend=function(e){var t=this,n=e.a,a=e.b,i=e.c,r=e.d,o=e.tx,s=e.ty,l=t.a,c=t.c,u=t.tx;t.a=n*l+i*t.b,t.b=a*l+r*t.b,t.c=n*c+i*t.d,t.d=a*c+r*t.d,t.tx=n*u+i*t.ty+o,t.ty=a*u+r*t.ty+s};var l=this;l.a=t,l.b=n,l.c=i,l.d=r,l.tx=o,l.ty=s}return __extends(i,a),i.prototype.clone=function(){var e=this;return new i(e.a,e.b,e.c,e.d,e.tx,e.ty)},i.prototype.setFrom=function(e){var t=this;t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t.tx=e.tx,t.ty=e.ty},i.prototype.identity=function(){var e=this;e.a=e.d=1,e.b=e.c=e.tx=e.ty=0},i.prototype.invert=function(){var e=this,t=new i(e.a,e.b,e.c,e.d,e.tx,e.ty),n=e.a,a=e.b,r=e.c,o=e.d,s=e.tx,l=e.ty;if(0==a&&0==r)return 0==n||0==o?t.a=t.d=t.tx=t.ty=0:(n=t.a=1/n,o=t.d=1/o,t.tx=-n*s,t.ty=-o*l),t;var c=n*o-a*r;if(0==c)return t.identity(),t;c=1/c;var u=t.a=o*c;return a=t.b=-a*c,r=t.c=-r*c,o=t.d=n*c,t.tx=-(u*s+r*l),t.ty=-(a*s+o*l),t},i.prototype.createBox=function(e,a,i,r,s,l,c,u,h){var d=this;if(0!=s?l=c=s%360:(l%=360,c%=360),0==l&&0==c)d.a=i,d.b=d.c=0,d.d=r;else{l*=o,c*=o;var p=t(l),f=n(l);l==c?(d.a=p*i,d.b=f*i):(d.a=t(c)*i,d.b=n(c)*i),d.c=-f*r,d.d=p*r}d.tx=e+u-(u*d.a+h*d.c),d.ty=a+h-(u*d.b+h*d.d)},i.isEqual=function(e,t){return e.tx==t.tx&&e.ty==t.ty&&e.a==t.a&&e.b==t.b&&e.c==t.c&&e.d==t.d},i}(e.AObject);e.Matrix=s}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n,a,i){void 0===t&&(t=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===i&&(i=0),e.call(this),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=n,this.height=i,this.width=a}return __extends(t,e),t.prototype.isPointIn=function(e){var t=this;return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},t.createFromRects=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];for(var i,r,o,s,l=e.x,c=e.y,u=e.width,h=e.height,d=0;d<n.length;d++)null!=n[d]&&(i=l+u,o=c+h,r=n[d].x+n[d].width,s=n[d].y+n[d].height,l>n[d].x&&(l=n[d].x),c>n[d].y&&(c=n[d].y),r>i&&(i=r),s>o&&(o=s));return new t(l,c,i-l,o-c)},t.createFromPoints=function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];for(var i=e.x,r=e.y,o=e.x,s=e.y,l=0;l<n.length;l++)null!=n[l]&&(i>n[l].x&&(i=n[l].x),r>n[l].y&&(i=n[l].y),o<n[l].x&&(o=n[l].x),s<n[l].y&&(s=n[l].y));return new t(i,r,o,s)},t.testRectCross=function(e,t){var n,a,i,r;return n=e.x+e.width/2,a=e.y+e.height/2,i=t.x+t.width/2,r=t.y+t.height/2,Math.abs(n-i)<=e.width/2+t.width/2&&Math.abs(a-r)<=e.height/2+t.height/2},t}(e.AObject);e.Rectangle=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){t.call(this),this.stage=null,this.cAlpha=1,this.cMatrix=new e.Matrix,this._enterFrameEvent=null,this.mouseEnable=!0,this.cFilters=[],this.cCacheFilters=[],this._isNeedUpdate=!0,this.name="",this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.alpha=1,this.skewX=0,this.skewY=0,this.anchorX=0,this.anchorY=0,this.visible=!0,this.matrix=new e.Matrix,this.mask=null,this.filters=null,this.parent=null,this._glInfo={}}return __extends(n,t),n.prototype.globalToLocal=function(e,t){return void 0===t&&(t=null),this.cMatrix.invert().transformPoint(e.x,e.y,t)},n.prototype.localToGlobal=function(e,t){return void 0===t&&(t=null),this.cMatrix.transformPoint(e.x,e.y,t)},n.prototype.hitTestPoint=function(e,t){void 0===t&&(t=!1);var a=this;return a.visible?t&&!a.mouseEnable?null:a.getBounds().isPointIn(a.globalToLocal(e,n._bp))?a:null:null},n.prototype.getBounds=function(){return null},n.prototype.getDrawRect=function(){var t,n=this,a=n.getBounds();if(a){var i=n.matrix.transformPoint(a.x,a.y),r=n.matrix.transformPoint(a.x+a.width,a.y+a.height);t=e.Rectangle.createFromPoints(i,r),t.width-=t.x,t.height-=t.y}return t},n.prototype.update=function(){var t=this;if(t.matrix.createBox(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.anchorX,t.anchorY),t.cFilters.length=0,t.cMatrix.setFrom(t.matrix),t.parent){if(t.cMatrix.prepend(t.parent.cMatrix),t.cAlpha=t.alpha*t.parent.cAlpha,t.parent.cFilters&&t.parent.cFilters.length>0)for(var n=t.parent.cFilters.length,a=t.parent.cFilters,i=0;n>i;i++)t.cFilters[i]=a[i]}else t.cAlpha=t.alpha;if(t.visible){if(t.filters&&t.filters.length>0)for(var n=t.filters.length,r=t.filters,i=0;n>i;i++)t.cFilters.push(r[i]);if(t.cFilters.length>0){var o=t.cFilters.length,s=!1;if(t.cCacheFilters.length!=o)s=!0;else for(var i=0;o>i;i++)if(t.cFilters[i].toString()!=t.cCacheFilters[i]){s=!0;break}if(s){t._isNeedUpdate=!0,t.cCacheFilters.length=0;for(var i=0;o>i;i++)t.cCacheFilters[i]=t.cFilters[i].toString()}}else t.cCacheFilters.length>0&&(t.cCacheFilters.length=0,t._isNeedUpdate=!0)}t.hasEventListener("onEnterFrame")&&(t._enterFrameEvent||(t._enterFrameEvent=new e.Event("onEnterFrame")),t.dispatchEvent(t._enterFrameEvent))},n.prototype.render=function(e){},n.prototype._onDispatchBubbledEvent=function(e){var t=this;t.stage=t.parent.stage,t.dispatchEvent(e),"onRemoveToStage"==e&&(t.stage=null)},n.prototype.getWH=function(){var e=this,t=e.getDrawRect();return{width:t.width,height:t.height}},n.prototype.setWH=function(e,t){var n=this,a=n.getWH();if(0!=e){var i=e/a.width;n.scaleX*=i}if(0!=t){var r=t/a.height;n.scaleY*=r}},n._bp=new e.Point,n._canvas=window.document.createElement("canvas"),n}(e.EventDispatcher);e.DisplayObject=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(e,n){void 0===e&&(e=null),void 0===n&&(n=null),t.call(this),this.bitmapData=null,this.rect=null,this._cacheImg=null,this._realCacheImg=null,this._cacheX=0,this._cacheY=0,this._isCache=!1;var a=this;a.bitmapData=e,a.rect=n}return __extends(n,t),n.prototype.render=function(e){this._cacheImg&&e.draw(this,0)},n.prototype.update=function(){var n=this;if(t.prototype.update.call(this),n._isNeedUpdate){if(!n.bitmapData||"IMG"==n.bitmapData.nodeName&&!n.bitmapData.complete)return;if(n.cFilters&&n.cFilters.length>0){n._realCacheImg||(n._realCacheImg=window.document.createElement("canvas"));var a=n._realCacheImg,i=n.rect,r=i?i.width:n.bitmapData.width,o=i?i.height:n.bitmapData.height,s=r+20,l=o+20;a.width=s,a.height=l,a.style.width=s/e.devicePixelRatio+"px",a.style.height=l/e.devicePixelRatio+"px";var c=a.getContext("2d");c.clearRect(0,0,s,l),c.translate(10,10),c.shadowBlur=0,c.shadowColor="#0",c.shadowOffsetX=0,c.shadowOffsetY=0;for(var u=n.cFilters,h=u.length,d=0;h>d;d++)if("Shadow"==n.cFilters[d].type){c.shadowBlur=u[d].blur,c.shadowColor=u[d].color,c.shadowOffsetX=u[d].offsetX,c.shadowOffsetY=u[d].offsetY;break}i?c.drawImage(n.bitmapData,i.x,i.y,r,o,0,0,r,o):c.drawImage(n.bitmapData,0,0);for(var p=n.cFilters.length,f=c.getImageData(0,0,s,l),d=0;p>d;d++){var _=n.cFilters[d];_.drawFilter(f)}c.putImageData(f,0,0),n._cacheImg=n._realCacheImg,n._cacheX=-10,n._cacheY=-10,n._isCache=!0}else n._isCache=!1,n._cacheX=0,n._cacheY=0,n._cacheImg=n.bitmapData;n._isNeedUpdate=!1,e.WGRender.setDisplayInfo(n,0)}},n.prototype.getBounds=function(){var t=this,n=new e.Rectangle;return t.rect?(n.width=t.rect.width,n.height=t.rect.height):(n.width=t.bitmapData?t.bitmapData.width:0,n.height=t.bitmapData?t.bitmapData.height:0),n},n.convertToImage=function(t){if(t.bitmapData&&("IMG"!=t.bitmapData.nodeName||t.bitmapData.complete)){if(t.rect){var n=e.DisplayObject._canvas,a=t.rect.width,i=t.rect.height;n.width=a,n.height=i;var r=n.getContext("2d"),o=t.rect;r.clearRect(0,0,a,i),r.drawImage(t.bitmapData,o.x,o.y,a,i,0,0,a,i);var s=window.document.createElement("img");return s.src=n.toDataURL("image/png"),s}return t.bitmapData}},n}(e.DisplayObject);e.Bitmap=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){t.call(this),this._command=[],this._cacheImg=window.document.createElement("canvas"),this._cacheX=0,this._cacheY=0,this.hitPixel=!0,this.beginRadialGradientFill=function(e,t,a){this._fill(n.getGradientColor(e,t,a))},this.beginRadialGradientStroke=function(e,t,a,i){void 0===i&&(i=1),this._stroke(n.getGradientColor(e,t,a),i)},this.decodePath=function(e){for(var t,a=this,i=["moveTo","lineTo","quadraticCurveTo","bezierCurveTo","closePath"],r=[2,2,4,6,0],o=0,s=e.length,l=0,c=0,u=n.BASE_64;s>o;){var h=e.charAt(o),d=u[h],p=d>>3,f=i[p];if(!f||3&d)throw"bad path data (@"+o+"): "+h;var _=r[p];p||(l=c=0),t=[],o++;for(var v=(d>>2&1)+2,m=0;_>m;m++){var g=u[e.charAt(o)],y=g>>5?-1:1;g=(31&g)<<6|u[e.charAt(o+1)],3==v&&(g=g<<6|u[e.charAt(o+2)]),g=y*g/10,m%2?l=g+=l:c=g+=c,t[m]=g,o+=v}a.addDraw(f,t)}}}return __extends(n,t),n.getGradientColor=function(t,n,a){var i,r=e.DisplayObject._canvas.getContext("2d");i=4==a.length?r.createLinearGradient(a[0],a[1],a[2],a[3]):r.createRadialGradient(a[0],a[1],a[2],a[3],a[4],a[5]);for(var o=0,s=t.length;s>o;o++)i.addColorStop(n[o],t[o]);return i},n.getBitmapStyle=function(t){var n=e.DisplayObject._canvas.getContext("2d");return n.createPattern(t,"repeat")},n.getRGBA=function(e,t){if(0==e.indexOf("0x")&&(e=e.replace("0x","#")),e.length<7&&(e="#000000"),1!=t){var n=parseInt("0x"+e.substr(1,2)),a=parseInt("0x"+e.substr(3,2)),i=parseInt("0x"+e.substr(5,2));e="rgba("+n+","+a+","+i+","+t+")"}return e},n.prototype.addDraw=function(e,t){var n=this;n._isNeedUpdate=!0,n._command.push([1,e,t])},n.prototype.drawRoundRect=function(e,t,n,a,i,r,o,s){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0);var l=(a>n?n:a)/2,c=0,u=0,h=0,d=0;0>i&&(i*=c=-1),i>l&&(i=l),0>r&&(r*=u=-1),r>l&&(r=l),0>s&&(s*=h=-1),s>l&&(s=l),0>o&&(o*=d=-1),o>l&&(o=l);var p=this._command;p.push([1,"moveTo",[e+n-r,t]]),p.push([1,"arcTo",[e+n+r*u,t-r*u,e+n,t+r,r]]),p.push([1,"lineTo",[e+n,t+a-s]]),p.push([1,"arcTo",[e+n+s*h,t+a+s*h,e+n-s,t+a,s]]),p.push([1,"lineTo",[e+o,t+a]]),p.push([1,"arcTo",[e-o*d,t+a+o*d,e,t+a-o,o]]),p.push([1,"lineTo",[e,t+i]]),p.push([1,"arcTo",[e-i*c,t-i*c,e+i,t,i]]),p.push([1,"closePath",[]])},n.prototype.moveTo=function(e,t){this._command.push([1,"moveTo",[e,t]])},n.prototype.lineTo=function(e,t){this._command.push([1,"lineTo",[e,t]])},n.prototype.arcTo=function(e,t){this._command.push([1,"arcTo",[e,t]])},n.prototype.quadraticCurveTo=function(e,t,n,a){this._command.push([1,"quadraticCurveTo",[e,t,n,a]])},n.prototype.bezierCurveTo=function(e,t,n,a,i,r){this._command.push([1,"bezierCurveTo",[e,t,n,a,i,r]])},n.prototype.closePath=function(){this._command.push([1,"closePath",[]])},n.prototype.drawRect=function(e,t,n,a){var i=this._command;i.push([1,"moveTo",[e,t]]),i.push([1,"lineTo",[e+n,t]]),i.push([1,"lineTo",[e+n,t+a]]),i.push([1,"lineTo",[e,t+a]]),i.push([1,"closePath",[]])},n.prototype.drawArc=function(e,t,n,a,i){this._command.push([1,"arc",[e,t,n,a/180*Math.PI,i/180*Math.PI]])},n.prototype.drawCircle=function(e,t,n){this._command.push([1,"arc",[e,t,n,0,2*Math.PI]])},n.prototype.drawEllipse=function(e,t,n,a){var i=.5522848,r=n/2*i,o=a/2*i,s=e+n,l=t+a,c=e+n/2,u=t+a/2,h=this._command;h.push([1,"moveTo",[e,u]]),h.push([1,"bezierCurveTo",[e,u-o,c-r,t,c,t]]),h.push([1,"bezierCurveTo",[c+r,t,s,u-o,s,u]]),h.push([1,"bezierCurveTo",[s,u+o,c+r,l,c,l]]),h.push([1,"bezierCurveTo",[c-r,l,e,u+o,e,u]])},n.prototype.clear=function(){var e=this;e._command=[],e._isNeedUpdate=!0},n.prototype.beginFill=function(e){this._fill(e)},n.prototype.beginLinearGradientFill=function(e,t,a){this._fill(n.getGradientColor(e,t,a))},n.prototype.beginBitmapFill=function(e,t){var a=this;t&&(a._isBitmapFill=t),a._fill(n.getBitmapStyle(e))},n.prototype._fill=function(e){var t=this._command;t.push([0,"fillStyle",e]),t.push([1,"beginPath",[]]),this._isNeedUpdate=!0},n.prototype.beginStroke=function(e,t){void 0===t&&(t=1),this._stroke(e,t)},n.prototype.beginLinearGradientStroke=function(e,t,a,i){void 0===i&&(i=1),this._stroke(n.getGradientColor(e,t,a),i)},n.prototype.beginBitmapStroke=function(e,t,a){void 0===a&&(a=1);var i=this;t&&(i._isBitmapStroke=t),i._stroke(n.getBitmapStyle(e),a)},n.prototype._stroke=function(e,t){var n=this._command;n.push([0,"lineWidth",t]),n.push([0,"strokeStyle",e]),n.push([1,"beginPath",[]]),this._isNeedUpdate=!0},n.prototype.endFill=function(){var e=this,t=e._command,n=e._isBitmapFill;n&&t.push([2,"setTransform",[n.a,n.b,n.c,n.d,n.tx,n.ty]]),t.push([1,"fill",[]]),n&&(e._isBitmapFill=null)},n.prototype.endStroke=function(){var e=this,t=e._command,n=e._isBitmapStroke;n&&t.push([2,"setTransform",[n.a,n.b,n.c,n.d,n.tx,n.ty]]),t.push([1,"stroke",[]]),n&&(e._isBitmapStroke=null)},n.prototype.render=function(e){var t=this;""!=t._cacheImg.src&&e.draw(t,1)},n.prototype.update=function(){var n=this;if(t.prototype.update.call(this),n._isNeedUpdate){var a,i,r,o,s,l=n._command.length;if(l>0){var c,u=0,h=0,d=0;for(s=0;l>s;s++)if(c=n._command[s],1==c[0]){if("moveTo"==c[1]||"lineTo"==c[1]||"arcTo"==c[1]||"bezierCurveTo"==c[1])void 0==a&&(a=c[2][0]),void 0==i&&(i=c[2][1]),void 0==r&&(r=c[2][0]),void 0==o&&(o=c[2][1]),"bezierCurveTo"==c[1]?(a=Math.min(a,c[2][0],c[2][2],c[2][4]),i=Math.min(i,c[2][1],c[2][3],c[2][5]),r=Math.max(r,c[2][0],c[2][2],c[2][4]),o=Math.max(o,c[2][1],c[2][3],c[2][5]),u=c[2][4],h=c[2][5]):(a=Math.min(a,c[2][0]),i=Math.min(i,c[2][1]),r=Math.max(r,c[2][0]),o=Math.max(o,c[2][1]),u=c[2][0],h=c[2][1]);else if("quadraticCurveTo"==c[1]){var p=.5*(u+c[2][0]),f=.5*(u+c[2][1]),_=.5*(c[2][0]+c[2][2]),v=.5*(c[2][1]+c[2][3]);void 0==a&&(a=p),void 0==i&&(i=f),void 0==r&&(r=p),void 0==o&&(o=f),a=Math.min(a,p,_,c[2][2]),i=Math.min(i,f,v,c[2][3]),r=Math.max(r,p,_,c[2][2]),o=Math.max(o,f,v,c[2][3]),u=c[2][2],h=c[2][3]}else if("arc"==c[1]){var m=c[2][0],g=c[2][1],y=c[2][2],x=m-y,b=g-y,E=m+y,w=g+y;void 0==a&&(a=x),void 0==i&&(i=b),void 0==r&&(r=E),void 0==o&&(o=w),a=Math.min(a,x),i=Math.min(i,b),r=Math.max(r,E),o=Math.max(o,w)}}else"lineWidth"==c[1]&&d<c[2]&&(d=c[2]);if(void 0!=a){a-=20+d>>1,i-=20+d>>1,r+=20+d>>1,o+=20+d>>1;var T=r-a,M=o-i;n._cacheX=a,n._cacheY=i;var F=n._cacheImg;F.width=T,F.height=M,F.style.width=T/e.devicePixelRatio+"px",F.style.height=M/e.devicePixelRatio+"px";var C=F.getContext("2d");if(C.clearRect(0,0,T,M),C.setTransform(1,0,0,1,-a,-i),n.cFilters&&n.cFilters.length>0){for(var I=n.cFilters,L=I.length,s=0;L>s;s++)if("Shadow"==n.cFilters[s].type){C.shadowBlur+=I[s].blur,C.shadowColor+=I[s].color,C.shadowOffsetX+=I[s].offsetX,C.shadowOffsetY+=I[s].offsetY;break}}else C.shadowBlur=0,C.shadowColor="#0",C.shadowOffsetX=0,C.shadowOffsetY=0;var c;for(s=0;l>s;s++)if(c=n._command[s],c[0]>0){var R=c[2].length;0==R?C[c[1]]():2==R?C[c[1]](c[2][0],c[2][1]):4==R?C[c[1]](c[2][0],c[2][1],c[2][2],c[2][3]):5==R?C[c[1]](c[2][0],c[2][1],c[2][2],c[2][3],c[2][4]):6==R&&(2==c[0]&&(c[2][4]-=a,c[2][5]-=i),C[c[1]](c[2][0],c[2][1],c[2][2],c[2][3],c[2][4],c[2][5]))}else C[c[1]]=c[2];if(n.cFilters&&n.cFilters.length>0){for(var S=n.cFilters.length,O=C.getImageData(0,0,T,M),s=0;S>s;s++){var D=n.cFilters[s];D.drawFilter(O)}C.putImageData(O,0,0)}}else n._cacheImg.width=0,n._cacheImg.height=0,n._cacheX=0,n._cacheY=0}else n._cacheImg.width=0,n._cacheImg.height=0,n._cacheX=0,n._cacheY=0;n._isNeedUpdate=!1,e.WGRender.setDisplayInfo(n,1)}},n.prototype.getBounds=function(){var t=this,n=new e.Rectangle;return t._cacheImg&&(n.x=t._cacheX+20,n.y=t._cacheY+20,n.width=t._cacheImg.width-20,n.height=t._cacheImg.height-20),n},n.prototype.hitTestPoint=function(t,n){void 0===n&&(n=!1);var a=this;if(n&&!a.mouseEnable)return null;var i=a.globalToLocal(t,e.DisplayObject._bp);if(a.getBounds().isPointIn(i)){if(!a.hitPixel)return a;var r=e.DisplayObject._canvas;r.width=1,r.height=1;var o=r.getContext("2d");if(o.clearRect(0,0,1,1),o.setTransform(1,0,0,1,a._cacheX-i.x,a._cacheY-i.y),o.drawImage(a._cacheImg,0,0),o.getImageData(0,0,1,1).data[3]>0)return a}return null},n.prototype.changeColor=function(e){for(var t=this,n=t._command.length,a=t._command,i=0;n>i;i++)0==a[i][0]&&("fillStyle"==a[i][1]&&e.fillColor&&a[i][2]!=e.fillColor&&(a[i][2]=e.fillColor,t._isNeedUpdate=!0),"strokeStyle"==a[i][1]&&e.strokeColor&&a[i][2]!=e.strokeColor&&(a[i][2]=e.strokeColor,t._isNeedUpdate=!0),"lineWidth"==a[i][1]&&e.lineWidth&&a[i][2]!=e.lineWidth&&(a[i][2]=e.lineWidth,t._isNeedUpdate=!0))},n.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},n}(e.DisplayObject);e.Shape=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){t.call(this),this.mouseChildren=!0,this.children=[]}return __extends(n,t),n.prototype.addChild=function(e){this.addChildAt(e,this.children.length)},n.prototype.removeChild=function(e){for(var t=this,n=t.children.length,a=0;n>a;a++)if(t.children[a]==e){t.removeChildAt(a);break}},n._getElementsByName=function(e,t,a,i,r){var o=t.children.length;if(o>0)for(var s,l,c=0;o>c;c++){if(l=t.children[c],s=l.name,s&&""!=s&&e.test(s)&&(r.push(l),a))return;i&&null!=l.children&&n._getElementsByName(e,l,a,i,r)}},n.prototype.getChildByName=function(e,t,a){if(void 0===t&&(t=!0),void 0===a&&(a=!1),!e)return null;var i,r=this;i="string"==typeof e?new RegExp("^"+e+"$"):e;var o=[];n._getElementsByName(i,r,t,a,o);var s=o.length;return 0==s?null:1==s?o[0]:o},n.prototype.addChildAt=function(e,t){var n,a=this,i=a==e.parent;if(e.parent)if(i){n=a.children.length;for(var r=0;n>r;r++)if(a.children[r]==e){a.children.splice(r,1);break}}else e.parent.removeChild(e);e.parent=a,n=a.children.length,t>=n?a.children.push(e):0==t?a.children.unshift(e):a.children.splice(t,0,e),a.stage&&!i&&e._onDispatchBubbledEvent("onAddToStage")},n.prototype.getChildAt=function(e){return this.children.length-1>=e?this.children[e]:null},n.prototype.getChildIndex=function(e){for(var t=this.children.length,n=0;t>n;n++)if(this.children[n]==e)return n;return-1},n.prototype._onDispatchBubbledEvent=function(e){var n=this,a=n.children.length;n.stage=n.parent.stage;for(var i=0;a>i;i++)n.children[i]._onDispatchBubbledEvent(e);t.prototype._onDispatchBubbledEvent.call(this,e)},n.prototype.removeChildAt=function(e){var t,n=this,a=n.children.length;0!=a&&(t=e==a?n.children.pop():0==e?n.children.shift():n.children.splice(e,1)[0],t._onDispatchBubbledEvent("onRemoveToStage"),t.parent=null)},n.prototype.removeAllChildren=function(){for(var e=this,t=e.children.length,n=t-1;n>=0;n--)e.removeChildAt(n)},n.prototype.update=function(){var e=this;t.prototype.update.call(this);for(var n,a=e.children.length,i=a-1;i>=0;i--)n=e.children[i],n.update()},n.prototype.hitTestPoint=function(e,t){void 0===t&&(t=!1);var n=this;if(!n.visible)return null;if(t&&!n.mouseEnable)return null;for(var a,i,r=n.children.length,o=r-1;o>=0;o--)if(i=n.children[o],(!i.mask||i.mask.hitTestPoint(e,t))&&(a=i.hitTestPoint(e,t)))return a;return null},n.prototype.getBounds=function(){var t=this,n=t.children.length;if(0==n)return null;for(var a=t.children[0].getDrawRect(),i=1;n>i;i++)a=e.Rectangle.createFromRects(a,t.children[i].getDrawRect());return a},n.prototype.render=function(e){for(var t,n,a=this,i=[],r=a.children.length,o=0;r>o;o++)if(n=a.children[o],n.cAlpha>0&&n.visible){if(t)if(n.mask){if(n.mask!=t){e.endMask(),t=n.mask;var s=t.getInstanceId();i.indexOf(s)<0&&(t.parent=a,t.stage=a.stage,a.totalFrames&&t.totalFrames&&t.gotoAndStop(a.currentFrame),t.update(),i.push(s)),e.beginMask(t)}}else e.endMask(),t=null;else if(n.mask){t=n.mask;var s=t.getInstanceId();i.indexOf(s)<0&&(t.parent=a,t.stage=a.stage,a.totalFrames&&t.totalFrames&&t.gotoAndStop(a.currentFrame),t.update(),i.push(s)),e.beginMask(t)}n.render(e)}t&&e.endMask()},n}(e.DisplayObject);e.Sprite=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n){e.call(this),this.media=null,this.type="",this._loop=0;var a=this;"string"==typeof t?(a.media=document.createElement(n),a.media.src=t):a.media=t,a._SBWeixin=a._weixinSB.bind(a),a.media.addEventListener("ended",function(){a._loop--,a._loop>0?a.play(0,a._loop):a.media.pause(),a.dispatchEvent("onPlayEnd")}.bind(a),!1),a.type=n.toLocaleUpperCase(),a.media.addEventListener("timeupdate",function(){a.dispatchEvent("onPlayUpdate",{currentTime:a.media.currentTime})},!1)}return __extends(t,e),t.prototype.play=function(e,t){var n=this;n._loop=t;try{n.media.currentTime=e}catch(a){trace(a)}try{WeixinJSBridge.invoke("getNetworkType",{},n._SBWeixin)}catch(a){n.media.play()}},t.prototype._weixinSB=function(){this.media.play()},t.prototype.stop=function(){this.media.pause(),this.media.currentTime=0},t.prototype.pause=function(){this.media.pause()},t}(e.EventDispatcher);e.Media=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t){e.call(this,t,"Audio")}return __extends(t,e),t}(e.Media);e.Sound=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n,a){e.call(this,t,"Video");var i=this;i.media.setAttribute("webkit-playsinline","true"),i.media.setAttribute("x-webkit-airplay","true"),i.media.width=n,i.media.height=a}return __extends(t,e),t}(e.Media);e.Video=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(n,a,i){t.call(this),this.src="",this._lastSrc="",this.currentFrame=0,this.currentBitmap=null,this.totalsFrame=1,this.rect=null,this.loop=!1,this._isLoaded=!1,this.canPlay=!1,this.isPlaying=!0,this.autoplay=!1;var r=this;r.src=n,r.rect=new e.Rectangle(0,0,a,i),r.list=[],r._urlLoader=new e.URLLoader,r._urlLoader.addEventListener(e.Event.COMPLETE,r.success.bind(r))}return __extends(n,t),n.prototype.success=function(e){var t=this;if("json"==e.data.type){t._configInfo={};for(var n in e.data.response)t._configInfo[n]=e.data.response[n];t._startTime=Date.now(),t._urlLoader.responseType="image",t.loadImage()}else if(t.list.push(e.data.response),t._currentLoadIndex=t.list.length,t._currentLoadIndex==t._configInfo.totalsPage)t.canPlay||(t.canPlay=!0),t._isLoaded=!0,t.dispatchEvent("onload");else{t.loadImage();var a=t._currentLoadIndex*t._configInfo.pageCount;if(a>=30){if(30==a){var i=Date.now(),r=i-t._startTime;500>r?t._needBufferFrame=30:1e3>r?t._needBufferFrame=60:1500>r?t._needBufferFrame=90:2e3>r?t._needBufferFrame=120:2500>r?t._needBufferFrame=150:t._needBufferFrame=180}a>=t._needBufferFrame&&!t.canPlay&&(t.canPlay=!0,t.dispatchEvent("oncanplay"))}}},n.prototype.update=function(){var e=this;if(e.canPlay&&e.autoplay){if(e.currentFrame==e._configInfo.totalsFrame)e.currentFrame=0,e.loop||(e.autoplay=!1,e.isPlaying=!1),e.dispatchEvent("onPlayEnd");else if(e.currentFrame<e._currentLoadIndex*e._configInfo.pageCount-1||e._isLoaded){var t=Math.floor(e.currentFrame/e._configInfo.pageCount),n=e.currentFrame%e._configInfo.pageCount,a=Math.floor(n/e._configInfo.rowCount),i=n%e._configInfo.rowCount;e.rect.x=i*(e._configInfo.dis+e._configInfo.width)+e._configInfo.dis,e.rect.y=a*(e._configInfo.dis+e._configInfo.height)+e._configInfo.dis,e.rect.width=e._configInfo.width,e.rect.height=e._configInfo.height,e.currentBitmap=e.list[t],e.currentFrame++,e.isPlaying||(e.isPlaying=!0)}else e.canPlay=!1,e.isPlaying=!1;e.dispatchEvent("onPlayUpdate",{currentTime:e._currentLoadIndex})}e.checkChange()},n.prototype.checkChange=function(){var e=this;e._lastSrc!=e.src&&(""!=e.src?(e._urlLoader.responseType="json",e._urlLoader.load(e.src+"/config.json"),e.canPlay=!1,e._currentLoadIndex=0,e.currentFrame=0,e._needBufferFrame=1e3,e._isLoaded=!1,e._lastSrc=e.src):e.clear())},n.prototype.loadImage=function(){var e=this;e._urlLoader.load(e.src+"/"+e._configInfo.name+e._currentLoadIndex+e._configInfo.type)},n.prototype.play=function(){this.autoplay=!0},n.prototype.pause=function(){this.autoplay=!1},n.prototype.clear=function(){var e=this;e._urlLoader.loadCancel(),e.list=[],e.src="",e._lastSrc=""},n}(e.EventDispatcher);e.ImageFrames=t}(annie||(annie={}));var annie;!function(e){var t=function(){function t(){var e=this;e.frameChildList=new Array,e.keyIndex=0,e.eventName="",e.soundName="",e.soundScene="",e.soundTimes=1}return t.prototype.setDisplayInfo=function(t,n,a){void 0===n&&(n=null),void 0===a&&(a=null);var i=this,r={display:t,x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,alpha:1};e.RESManager.d(r,n,a),i.frameChildList.push(r)},t.prototype.setGraphicInfo=function(e,t,n){var a=this,i=a.frameChildList.length-1;a.frameChildList[i].graphicInfo={loopType:e,firstFrame:t,parentFrameIndex:n}},t}(),n=function(n){function a(){n.call(this),this._timeline=[],this.container=new e.Sprite,this.currentFrame=1,this.isPlaying=!0,this.isFront=!0,this.totalFrames=1,this._scriptLayer=[],this._labelFrame={},this._frameLabel={},this._isNeedUpdateChildren=!0,this._isUpdateFrame=!1,this._mouseEvent=function(t){t.type==e.MouseEvent.MOUSE_DOWN?this.gotoAndStop(2):this.gotoAndStop(1)};var t=this;t.addChild(t.container)}return __extends(a,n),a.prototype.stop=function(){var e=this;e.isPlaying=!1},a.prototype.as=function(e,t){var n=this;n._scriptLayer[t]=e},a.prototype.addFrameScript=function(e,t){var n=this;n.as(t,e)},a.prototype.removeFrameScript=function(e){var t=this;t._scriptLayer[e]&&(t._scriptLayer[e]=null)},a.prototype.a=function(){var e=this;return e._currentLayer=[],e._timeline.unshift(e._currentLayer),e},a.prototype.b=function(e){var n=this;n._currentLayerFrame=new t,n._currentLayerFrame.keyIndex=n._currentLayer.length;for(var a=0;e>a;a++)n._currentLayer.push(n._currentLayerFrame);return n.totalFrames<n._currentLayer.length&&(n.totalFrames=n._currentLayer.length),n},a.prototype.c=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var a=this;return a._currentLayerFrame.setDisplayInfo(e,t,n),a},a.prototype.g=function(e,t,n){var a=this;return a._currentLayerFrame.setGraphicInfo(e,t,n),a},a.prototype.setGraphicInfo=function(e){var t=this;t._graphicInfo=e},a.prototype.initButton=function(){var e=this;e.mouseChildren=!1,e.totalFrames>1&&(e.gotoAndStop(1),e.addEventListener("onMouseDown",this._mouseEvent.bind(this)),e.addEventListener("onMouseUp",this._mouseEvent.bind(this)),e.addEventListener("onMouseOut",this._mouseEvent.bind(this)))},a.prototype.d=function(e,t){var n=this;return n._labelFrame[e]=t+1,n._frameLabel[t+1]=e,n},a.prototype.getCurrentLabel=function(){var e=this;return e._frameLabel[e.currentFrame]?e._frameLabel[e.currentFrame]:""},a.prototype.e=function(e){var t=this;return t._currentLayerFrame.eventName=e,t},a.prototype.f=function(e,t,n){var a=this;return a._currentLayerFrame.soundName=t,a._currentLayerFrame.soundScene=e,a._currentLayerFrame.soundTimes=n,a},a.prototype.nextFrame=function(){var e=this;e.currentFrame<e.totalFrames&&(e.currentFrame++,e._isNeedUpdateChildren=!0),e.isPlaying=!1,e._isUpdateFrame=!1},a.prototype.prevFrame=function(){var e=this;e.currentFrame>1&&(e.currentFrame--,e._isNeedUpdateChildren=!0),e.isPlaying=!1,e._isUpdateFrame=!1},a.prototype.gotoAndStop=function(e){var t=this;t.isPlaying=!1;var n;"string"==typeof e?void 0!=t._labelFrame[e]?n=t._labelFrame[e]:trace("未找到帧标签叫'"+e+"'的帧"):"number"==typeof e&&(e>t.totalFrames&&(e=t.totalFrames),1>e&&(e=1),n=e),t.currentFrame!=n&&(t.currentFrame=n,t._isNeedUpdateChildren=!0,t._isUpdateFrame=!1)},a.prototype.play=function(e){void 0===e&&(e=!0);var t=this;t.isPlaying=!0,void 0==e?t.isFront=!0:t.isFront=e,t._isUpdateFrame=!0},a.prototype.gotoAndPlay=function(e,t){void 0===t&&(t=!0);var n=this;void 0==t?n.isFront=!0:n.isFront=t,n.isPlaying=!0;var a;"string"==typeof e?void 0!=n._labelFrame[e]?a=n._labelFrame[e]:trace("未找到帧标签叫'"+e+"'的帧"):"number"==typeof e&&(e>n.totalFrames&&(e=n.totalFrames),1>e&&(e=1),a=e),n.currentFrame!=a&&(n.currentFrame=a,n._isUpdateFrame=!1,n._isNeedUpdateChildren=!0)},a.prototype.setFrameChild=function(e,t){e._donotUpdateinMC=e._donotUpdateinMC||{};for(var n in t)null!=t[n]?e._donotUpdateinMC[n]=t[n]:delete e._donotUpdateinMC[t[n]]},a.prototype.update=function(){var t=this;if(!t.pauseUpdate){if(t._graphicInfo){var a=t.parent.currentFrame?t.parent.currentFrame:1,i=1,r=t._graphicInfo.parentFrameIndex+1,o=t._graphicInfo.firstFrame+1;"play once"==t._graphicInfo.loopType?a-r>=0&&(i=a-r+o,i>t.totalFrames&&(i=t.totalFrames)):"loop"==t._graphicInfo.loopType?(a-r>=0&&(i=(a-r+o)%t.totalFrames),0==i&&(i=t.totalFrames)):i=o,t.currentFrame!=i&&(t.currentFrame=i,t._isNeedUpdateChildren=!0),t.isPlaying=!1}else t.isPlaying&&t._isUpdateFrame&&(t.isFront?(t.currentFrame++,t.currentFrame>t.totalFrames&&(t.currentFrame=1)):(t.currentFrame--,t.currentFrame<1&&(t.currentFrame=t.totalFrames)),t._isNeedUpdateChildren=!0);if(t._isUpdateFrame=!0,t._isNeedUpdateChildren){var s,l=t._timeline.length,c=0,u=null,h=null,d=null,p=0,f=t.children,_=[];for(s=0;s<t.children.length-1;s++)f[s].parent=null;for(t.children=[],s=0;l>s;s++)if(c=t._timeline[s].length,t.currentFrame<=c){
if(u=t._timeline[s][t.currentFrame-1],void 0==u)continue;if(u.keyIndex==t.currentFrame-1&&(""!=u.soundName&&e.RESManager.getMediaByName(u.soundScene,u.soundName).play(0,u.soundTimes),""!=u.eventName&&t.hasEventListener(e.Event.CALL_FRAME))){var v=new e.Event(e.Event.CALL_FRAME);v.data={frameIndex:t.currentFrame,frameName:u.eventName},_.push(v)}p=u.frameChildList.length;for(var m=0;p>m;m++){if(d=u.frameChildList[m],h=d.display,h.x=d.x,h.y=d.y,h.scaleX=d.scaleX,h.scaleY=d.scaleY,h.rotation=d.rotation,h.skewX=d.skewX,h.skewY=d.skewY,h.alpha=d.alpha,d.filters?h.filters=d.filters:h.filters=null,d.graphicInfo?h._graphicInfo=d.graphicInfo:h._graphicInfo&&(h._graphicInfo=null),void 0!=h._donotUpdateinMC)for(var g in h._donotUpdateinMC)void 0!=h._donotUpdateinMC[g]&&(h[g]=h._donotUpdateinMC[g]);h.parent=t,t.children.push(h),f.indexOf(h)<0&&h._onDispatchBubbledEvent("onAddToStage")}}t._isNeedUpdateChildren=!1;var y=f.length;for(s=0;y>s;s++)f[s].parent||(f[s].parent=t,f[s]._onDispatchBubbledEvent("onRemoveToStage"),f[s].parent=null);if(t.children.push(t.container),n.prototype.update.call(this),(1==t.currentFrame&&!t.isFront||t.currentFrame==t.totalFrames&&t.isFront)&&t.hasEventListener(e.Event.END_FRAME)){var v=new e.Event(e.Event.END_FRAME);v.data={frameIndex:t.currentFrame,frameName:1==t.currentFrame?"firstFrame":"endFrame"},_.push(v)}var y=_.length;for(s=0;y>s;s++)t.dispatchEvent(_[s]);void 0!=t._scriptLayer[t.currentFrame-1]&&t._scriptLayer[t.currentFrame-1]()}else n.prototype.update.call(this)}},a.prototype._onDispatchBubbledEvent=function(e){if(n.prototype._onDispatchBubbledEvent.call(this,e),"onRemoveToStage"==e){var t=this;t.currentFrame=1,t.isPlaying=!0,t.isFront=!0,t._isNeedUpdateChildren=!0,t._isUpdateFrame=!1}},a}(e.Sprite);e.MovieClip=n}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){t.call(this),this.htmlElement=null,this._oldProps={alpha:1,matrix:{a:1,b:0,c:0,d:1,tx:0,ty:0}},this._isAdded=!1;var n=this;n.addEventListener(e.Event.REMOVE_TO_STAGE,function(e){n.htmlElement&&(n.htmlElement.style.display="none")}),n.addEventListener(e.Event.ADD_TO_STAGE,function(e){n._isAdded?n.htmlElement&&n.visible&&(n.htmlElement.style.display="inline"):(n._isAdded=!0,n.stage.rootDiv.insertBefore(n.htmlElement,n.stage.rootDiv.childNodes[0]))})}return __extends(n,t),n.prototype.init=function(e){var t=this;"string"==typeof e&&(e=document.getElementById(e));var n=e.style;n.position="absolute",n.display="none",n.transformOrigin=n.WebkitTransformOrigin="0 0 0",t.htmlElement=e},n.prototype.delElement=function(){var e=this.htmlElement;e&&(e.style.display="none",e.parentNode&&e.parentNode.removeChild(e),this._isAdded=!1,this.htmlElement=null)},n.prototype.update=function(){t.prototype.update.call(this);var n=this,a=n.htmlElement;if(a){for(var i=a.style,r=n.visible,o=n.parent;r&&o;)r=o.visible,o=o.parent;var s=r?"inline":"none";if(s!=i.display&&(i.display=s),n.visible){var l=new Object;l.alpha=n.cAlpha;var c=n.cMatrix,u=n._oldProps,h=e.devicePixelRatio;e.Matrix.isEqual(u.matrix,c)||(i.transform=i.webkitTransform="matrix("+c.a/h+","+c.b/h+","+c.c/h+","+c.d/h+","+c.tx/h+","+c.ty/h+")",u.matrix={tx:c.tx,ty:c.ty,a:c.a,b:c.b,c:c.c,d:c.d}),u.alpha!=l.alpha&&(i.opacity=l.alpha,u.alpha=l.alpha)}}},n.prototype.getBounds=function(){var t=this,n=new e.Rectangle;if(t.htmlElement){var a=t.htmlElement.style;n.width=parseInt(a.width),n.height=parseInt(a.height)}return n},n}(e.DisplayObject);e.FloatDisplay=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(n,a,i,r){void 0===a&&(a=0),t.call(this),this.videoType=0;var o=!0;if(0==a)if("android"==e.osType)o=!1;else{var s=document.createElement("video");o="probably"==s.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')}else 1==a&&(o=!1);o?this.video=new e.Video(n+".mp4",i,r):this.video=new e.ImageFrames(n,i,r),this.videoType=o?1:0}return __extends(n,t),n.prototype.update=function(){0==this.videoType?(this.video.update(),this.rect=this.video.rect,this._cacheImg=this.bitmapData=this.video.currentBitmap):this._cacheImg=this.bitmapData=this.video,t.prototype.update.call(this)},n}(e.Bitmap);e.VideoPlayer=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(){t.call(this),this._cacheImg=window.document.createElement("canvas"),this._cacheX=0,this._cacheY=0,this._cacheObject={bold:!1,italic:!1,size:12,lineType:"single",text:"ILoveAnnie",textAlign:"left",font:"Arial",color:"#fff",lineWidth:0,lineHeight:0},this.textAlign="left",this.lineHeight=0,this.lineWidth=0,this.lineType="single",this.text="",this.font="Arial",this.size=12,this.color="#fff",this.italic=!1,this.bold=!1}return __extends(n,t),n.prototype._prepContext=function(e){var t=this,n=t.size||12;n+="px ",n+=t.font,t.bold&&(n="bold "+n),t.italic&&(n="italic "+n),e.font=n,e.textAlign=this.textAlign||"left",e.textBaseline="top",e.fillStyle=this.color},n.prototype._getMeasuredWidth=function(e){var t=this._cacheImg.getContext("2d"),n=t.measureText(e).width;return n},n.prototype.render=function(e){var t=this;""!=t._cacheImg.src&&e.draw(t,2)},n.prototype.update=function(){var n=this;if(!n.pauseUpdate){t.prototype.update.call(this);for(var a in n._cacheObject)n._cacheObject[a]!=n[a]&&(n._cacheObject[a]=n[a],n._isNeedUpdate=!0);if(n._isNeedUpdate){n.text+="";var i=n._cacheImg,r=i.getContext("2d"),o=n.text.toString().split(/(?:\r\n|\r|\n)/),s=[];n._prepContext(r);var l;if(l=n.lineHeight?n.lineHeight:1.2*n._getMeasuredWidth("M"),n.lineWidth?n.lineWidth<l&&(n.lineWidth=l):n.lineWidth=10*l,n.text.indexOf("\n")<0&&"single"==n.lineType){s.push(o[0]);var c=o[0],u=n._getMeasuredWidth(c);if(u>n.lineWidth)for(var h=n._getMeasuredWidth(c[0]),d=c[0],p=0,f=c.length,_=1;f>_;_++){if(p=r.measureText(c[_]).width,h+=p,h>n.lineWidth){s[0]=d;break}d+=c[_]}}else for(var v=0,m=o.length;m>v;v++){for(var c=o[v],h=n._getMeasuredWidth(c[0]),d=c[0],p=0,f=c.length,_=1;f>_;_++)p=r.measureText(c[_]).width,h+=p,h>this.lineWidth?(s.push(d),d=c[_],h=p):d+=c[_];s.push(d)}var g=l*s.length,y=n.lineWidth,x=0;if("center"==n.textAlign?x=.5*y:"right"==n.textAlign&&(x=y),i.width=y+20,i.height=g+20,i.style.width=i.width/e.devicePixelRatio+"px",i.style.height=i.height/e.devicePixelRatio+"px",r.clearRect(0,0,y,g),r.setTransform(1,0,0,1,x+10,10),n.cFilters&&n.cFilters.length>0){for(var b=n.cFilters,E=b.length,v=0;E>v;v++)if("Shadow"==n.cFilters[v].type){r.shadowBlur=b[v].blur,r.shadowColor=b[v].color,r.shadowOffsetX=b[v].offsetX,r.shadowOffsetY=b[v].offsetY;break}}else r.shadowBlur=0,r.shadowColor="#0",r.shadowOffsetX=0,r.shadowOffsetY=0;n._prepContext(r);for(var v=0;v<s.length;v++)r.fillText(s[v],0,v*l,y);if(n.cFilters&&n.cFilters.length>0){for(var w=n.cFilters.length,T=r.getImageData(0,0,y+20,g+20),v=0;w>v;v++){var M=n.cFilters[v];M.drawFilter(T),trace(n.cFilters[v].type)}r.putImageData(T,0,0)}n._cacheX=-10,n._cacheY=-10,n._isNeedUpdate=!1,e.WGRender.setDisplayInfo(n,2)}}},n.prototype.getBounds=function(){var t=this,n=new e.Rectangle;return t._cacheImg&&(n.x=0,n.y=0,n.width=t._cacheImg.width-20,n.height=t._cacheImg.height-20),n},n}(e.DisplayObject);e.TextField=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t){e.call(this),this.inputType="singleline";var n=null,a=this;"multiline"!=t?(n=document.createElement("input"),"password"==t?n.type="password":n.type="text"):(n=document.createElement("textarea"),n.style.resize="none",n.style.overflow="hidden"),a.inputType=t,a.init(n)}return __extends(t,e),t.prototype.init=function(t){e.prototype.init.call(this,t);var n=this;n.htmlElement.style.outline="none",n.htmlElement.style.borderWidth="thin",n.htmlElement.style.borderColor="#000"},t.prototype.initInfo=function(e,t,n,a,i,r,o,s,l){var c=this;c.htmlElement.placeholder=e,c.htmlElement.style.width=t+"px",c.htmlElement.style.height=n+"px",c.htmlElement.style.font=r+"px "+o,c.htmlElement.style.color=a,c.htmlElement.style.textAlign=i,c.setBorder(s),"multiLine"==c.inputType&&(c.htmlElement.style.lineHeight=l+"px")},t.prototype.setBold=function(e){var t=this.htmlElement.style;e?t.fontWeight="bold":t.fontWeight="normal"},t.prototype.setItalic=function(e){var t=this.htmlElement.style;e?t.fontStyle="italic":t.fontStyle="normal"},t.prototype.setBorder=function(e){var t=this;e?(t.htmlElement.style.borderStyle="inset",t.htmlElement.style.backgroundColor="#fff"):(t.htmlElement.style.borderStyle="none",t.htmlElement.style.backgroundColor="transparent")},t.prototype.getText=function(){var e=this;return e.htmlElement?e.htmlElement.value:void 0},t.prototype.setText=function(e){var t=this;t.htmlElement&&(t.htmlElement.value=e)},t}(e.FloatDisplay);e.InputText=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(a,i,r,o,s,l){void 0===a&&(a="annieEngine"),void 0===i&&(i=640),void 0===r&&(r=1040),void 0===o&&(o=30),void 0===s&&(s="fixedHeight"),void 0===l&&(l=0),t.call(this),this.rootDiv=null,this.renderObj=null,this.renderType=0,this.pause=!1,this.viewRect=new e.Rectangle,this.autoSteering=!1,this.autoResize=!1,this.width=0,this.height=0,this.divHeight=0,this.divWidth=0,this.bgColor="",this.scaleMode="onScale",this._flush=0,this._currentFlush=0,this._mouseEventInfo={},this._lastDpList=[],this._ml=[],this._mouseDownPoint=new e.Point(0,0),this._mouseEventTypes={mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"},this.onMouseEvent=function(e){var t=this;t._mouseEventInfo[t._mouseEventTypes[e.type]]=e},this.setAlign=function(){var t=this,n=t.divHeight*e.devicePixelRatio,a=t.divWidth*e.devicePixelRatio,i=t.height,r=t.width,o=n>a,s=i>r,l=1,c=1;if(t.x=(a-r)/2,t.y=(n-i)/2,t.autoSteering&&s!=o){var u=n;n=a,a=u}if("noScale"!=t.scaleMode)switch(l=n/i,c=a/r,t.scaleMode){case"noBorder":c>l?l=c:c=l;break;case"showAll":l>c?l=c:c=l;break;case"fixedWidth":l=c;break;case"fixedHeight":c=l}t.scaleX=c,t.scaleY=l,t.viewRect.x=(r-a/c)/2,t.viewRect.y=(i-n/l)/2,t.viewRect.width=r-2*t.viewRect.x,t.viewRect.height=i-2*t.viewRect.y,t.autoSteering?s==o?t.rotation=0:t.rotation=90:t.rotation=0},this.resize=function(){var e=this,t=e.getRootDivWH(e.rootDiv);(e.divWidth+e.divHeight==0||Math.abs(t.h+t.w-(e.divWidth+e.divHeight))<100)&&(e.divHeight=t.h,e.divWidth=t.w,e.renderObj.reSize(),e.setAlign())};var c=this;c.stage=this,"pc"==e.osType?c.autoResize=!0:(c.autoSteering=!0,c.autoResize=!0),c._lastMousePoint=new e.Point,c.name="stageInstance_"+c.getInstanceId();var u=document.getElementById(a);c.renderType=l,c.width=i,c.height=r,c.rootDiv=u,c.setFrameRate(o),c.scaleMode=s,c.anchorX=i/2,c.anchorY=r/2,0==l?c.renderObj=new e.CanvasRender(c):c.renderObj=new e.WGRender(c),c.renderObj.init(),window.addEventListener("resize",function(t){c.autoResize&&c.resize();var n=new e.Event("onResize");c.dispatchEvent(n)}),setTimeout(function(){if(c.resize(),c.update(),n.addUpdateObj(c),e.debug&&!n._isLoadedVConsole){var t=document.createElement("script");t.onload=function(){c.dispatchEvent(new e.Event("onInitStage")),t.onload=null},document.head.appendChild(t),t.src="libs/vConsole.min.js"}else c.dispatchEvent(new e.Event("onInitStage"))},100);var h=c.renderObj.rootContainer,d=c.onMouseEvent.bind(c);"pc"!=e.osType?(h.addEventListener("touchstart",d),h.addEventListener("touchmove",d),h.addEventListener("touchend",d)):(h.addEventListener("mousedown",d),h.addEventListener("mousemove",d),h.addEventListener("mouseup",d))}return __extends(n,t),n.prototype.update=function(){var e=this;e.pause||t.prototype.update.call(this)},n.prototype.render=function(n){this.pause||(n.begin(),t.prototype.render.call(this,n)),e.EventDispatcher._totalMEC>0&&this._mt()},n.prototype._initMouseEvent=function(e,t,n){e._pd=!1,e.clientX=t.x,e.clientY=t.y,e.stageX=n.x,e.stageY=n.y},n.prototype._mt=function(){var t,n,a,i,r,o=this,s=o._mouseEventInfo,l=[],c=0;for(var u in s)"pc"==e.osType?t=[s[u]]:s[u].targetTouches&&(t=s[u].targetTouches),t&&t.length>0&&(o._lastMousePoint.x=(t[0].clientX-t[0].target.offsetLeft)*e.devicePixelRatio,o._lastMousePoint.y=(t[0].clientY-t[0].target.offsetTop)*e.devicePixelRatio),r=o._lastMousePoint,a=o.globalToLocal(r,e.DisplayObject._bp),e.EventDispatcher.getMouseEventCount(u)>0&&(o._ml[c]?(n=o._ml[c],n.type=u):(n=new e.MouseEvent(u),o._ml[c]=n),l.push(n),o._initMouseEvent(n,r,a),c++),"onMouseDown"==u?(o._mouseDownPoint.x=r.x,o._mouseDownPoint.y=r.y,o._lastDpList=null):"onMouseUp"==u&&Math.abs(o._mouseDownPoint.x-r.x)<=1&&Math.abs(o._mouseDownPoint.y-r.y)<=1&&e.EventDispatcher.getMouseEventCount("onMouseClick")>0&&(o._ml[c]?(n=o._ml[c],n.type="onMouseClick"):(n=new e.MouseEvent("onMouseClick"),o._ml[c]=n),l.push(n),o._initMouseEvent(n,r,a),c++);if(c>0){var h=o.hitTestPoint(r,!0),d=[];if(h)for(;h;)h.mouseChildren===!1&&(d.length=0),d.push(h),h=h.parent;else d.push(o);var p=d.length;d.reverse();for(var f=0;p>f;f++){h=d[f];for(var _=0;c>_;_++)l[_]._pd===!1&&h.hasEventListener(l[_].type)&&(l[_].currentTarget=h,l[_].target=d[p-1],i=h.globalToLocal(r),l[_].localX=i.x,l[_].localY=i.y,h.dispatchEvent(l[_]))}if(o._lastDpList){var v=o._lastDpList.length,m=d.length;p=v>m?v:m;for(var g,y,x=!1,f=1;p>f;f++)x||o._lastDpList[f]!=d[f]&&(x=!0,o._ml[c]?(g=o._ml[c],g.type="onMouseOver"):(g=new e.MouseEvent("onMouseOver"),o._ml[c]=g),o._initMouseEvent(g,r,a),c++,o._ml[c]?(y=o._ml[c],y.type="onMouseOut"):(y=new e.MouseEvent("onMouseOut"),o._ml[c]=y),o._initMouseEvent(y,r,a)),x&&(o._lastDpList[f]&&y._pd===!1&&(h=o._lastDpList[f],h.hasEventListener("onMouseOut")&&(y.currentTarget=h,y.target=o._lastDpList[v-1],i=h.globalToLocal(r),y.localX=i.x,y.localY=i.y,h.dispatchEvent(y))),d[f]&&g._pd===!1&&(h=d[f],h.hasEventListener("onMouseOver")&&(g.currentTarget=h,g.target=d[m-1],i=h.globalToLocal(r),g.localX=i.x,g.localY=i.y,h.dispatchEvent(g))))}o._lastDpList=d}o._mouseEventInfo={}},n.prototype.flush=function(){var e=this;0==e._flush?(e.update(),e.render(e.renderObj)):0==e._currentFlush?(e.update(),e._currentFlush=e._flush):(e._currentFlush==e._flush&&e.render(e.renderObj),e._currentFlush--)},n.prototype.setFrameRate=function(e){var t=this;t._flush=60/e-1>>0,t._flush<0&&(t._flush=0)},n.prototype.getFrameRate=function(){return 60/(this._flush+1)},n.prototype.getRootDivWH=function(e){var t=e.style.width,n=e.style.height,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=parseInt(t),o=parseInt(n);return"NaN"==r.toString()?r=a:t.indexOf("%")>0&&(r*=a/100),"NaN"==o.toString()?o=i:n.indexOf("%")>0&&(o*=i/100),{w:r,h:o}},n.prototype.kill=function(){n.removeUpdateObj(this)},n.prototype.getBounds=function(){return this.viewRect},n.flushAll=function(){for(var e=n.allUpdateObjList.length,t=0;e>t;t++)n.allUpdateObjList[t]&&n.allUpdateObjList[t].flush();requestAnimationFrame(n.flushAll)},n.addUpdateObj=function(e){for(var t=!1,a=n.allUpdateObjList.length,i=0;a>i;i++)if(n.allUpdateObjList[i]===e){t=!0;break}t||n.allUpdateObjList.push(e)},n.removeUpdateObj=function(e){for(var t=n.allUpdateObjList.length,a=0;t>a;a++)if(n.allUpdateObjList[a]===e){n.allUpdateObjList.splice(a,1);break}},n._isLoadedVConsole=!1,n.allUpdateObjList=[],n}(e.Sprite);e.Stage=t}(annie||(annie={}));var annie;!function(e){var t=function(e){function t(t,n,a,i){void 0===t&&(t="black"),void 0===n&&(n=2),void 0===a&&(a=2),void 0===i&&(i=2),e.call(this),this.color="black",this.offsetX=2,this.offsetY=2,this.blur=2,this.type="Shadow";var r=this;r.offsetX=n,r.offsetY=a,r.blur=i,r.color=t}return __extends(t,e),t.prototype.toString=function(){var e=this;return e.type+e.offsetX+e.offsetY+e.blur+e.color},t.prototype.drawFilter=function(e){void 0===e&&(e=null)},t}(e.AObject);e.ShadowFilter=t;var n=function(e){function t(t,n,a,i,r,o,s,l){void 0===t&&(t=1),void 0===n&&(n=1),void 0===a&&(a=1),void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===l&&(l=0),e.call(this),this.redMultiplier=0,this.redOffset=0,this.greenMultiplier=0,this.greenOffset=0,this.blueMultiplier=0,this.blueOffset=0,this.alphaMultiplier=0,this.alphaOffset=0,this.type="Color";var c=this;c.redMultiplier=t,c.greenMultiplier=n,c.blueMultiplier=a,c.alphaMultiplier=i,c.redOffset=r,c.greenOffset=o,c.blueOffset=s,c.alphaOffset=l}return __extends(t,e),t.prototype.drawFilter=function(e){if(void 0===e&&(e=null),e)for(var t=this,n=e.data,a=n.length,i=0;a>i;i+=4)n[i]=n[i]*t.redMultiplier+t.redOffset,n[i+1]=n[i+1]*t.greenMultiplier+t.greenOffset,n[i+2]=n[i+2]*t.blueMultiplier+t.blueOffset,n[i+3]=n[i+3]*t.alphaMultiplier+t.alphaOffset},t.prototype.toString=function(){var e=this;return e.type+e.redMultiplier+e.greenMultiplier+e.blueMultiplier+e.alphaMultiplier+e.redOffset+e.greenOffset+e.blueOffset+e.alphaOffset},t}(e.AObject);e.ColorFilter=n;var a=function(e){function t(n,a,i,r){e.call(this),this.brightness=0,this.contrast=0,this.saturation=0,this.hue=0,this.type="ColorMatrix";var o=this;o.brightness=n,o.contrast=a,o.saturation=i,o.hue=r,o.colorMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n=o._cleanValue(n,255),0!=n&&o._multiplyMatrix([1,0,0,0,n,0,1,0,0,n,0,0,1,0,n,0,0,0,1,0,0,0,0,0,1]),a=this._cleanValue(a,100);var s;if(0!=a&&(0>a?s=127+a/100*127:(s=a%1,s=0==s?t.DELTA_INDEX[a]:t.DELTA_INDEX[a<<0]*(1-s)+t.DELTA_INDEX[(a<<0)+1]*s,s=127*s+127),o._multiplyMatrix([s/127,0,0,0,.5*(127-s),0,s/127,0,0,.5*(127-s),0,0,s/127,0,.5*(127-s),0,0,0,1,0,0,0,0,0,1])),i=this._cleanValue(i,100),0!=i){s=1+(i>0?3*i/100:i/100);var l=.3086,c=.6094,u=.082;o._multiplyMatrix([l*(1-s)+s,c*(1-s),u*(1-s),0,0,l*(1-s),c*(1-s)+s,u*(1-s),0,0,l*(1-s),c*(1-s),u*(1-s)+s,0,0,0,0,0,1,0,0,0,0,0,1])}if(r=this._cleanValue(r,180)/180*Math.PI,0!=r){var h=Math.cos(r),d=Math.sin(r),l=.213,c=.715,u=.072;o._multiplyMatrix([l+h*(1-l)+d*-l,c+h*-c+d*-c,u+h*-u+d*(1-u),0,0,l+h*-l+.143*d,c+h*(1-c)+.14*d,u+h*-u+d*-.283,0,0,l+h*-l+d*-(1-l),c+h*-c+d*c,u+h*(1-u)+d*u,0,0,0,0,0,1,0,0,0,0,0,1])}}return __extends(t,e),t.prototype.drawFilter=function(e){if(void 0===e&&(e=null),e)for(var t,n,a,i,r=e.data,o=r.length,s=this.colorMatrix,l=s[0],c=s[1],u=s[2],h=s[3],d=s[4],p=s[5],f=s[6],_=s[7],v=s[8],m=s[9],g=s[10],y=s[11],x=s[12],b=s[13],E=s[14],w=s[15],T=s[16],M=s[17],F=s[18],C=s[19],I=0;o>I;I+=4)t=r[I],n=r[I+1],a=r[I+2],i=r[I+3],r[I]=t*l+n*c+a*u+i*h+d,r[I+1]=t*p+n*f+a*_+i*v+m,r[I+2]=t*g+n*y+a*x+i*b+E,r[I+3]=t*w+n*T+a*M+i*F+C},t.prototype._multiplyMatrix=function(e){var t,n,a,i=[];for(t=0;5>t;t++){for(n=0;5>n;n++)i[n]=this.colorMatrix[n+5*t];for(n=0;5>n;n++){var r=0;for(a=0;5>a;a++)r+=e[n+5*a]*i[a];this.colorMatrix[n+5*t]=r}}},t.prototype._cleanValue=function(e,t){return Math.min(t,Math.max(-t,e))},t.prototype.toString=function(){var e=this;return e.type+e.brightness+e.hue+e.saturation+e.contrast},t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t}(e.AObject);e.ColorMatrixFilter=a;var i=function(e){function t(t,n,a){void 0===t&&(t=2),void 0===n&&(n=2),void 0===a&&(a=1),e.call(this),this.type="blur",this.blurX=0,this.blurY=0,this.quality=1;var i=this;i.blurX=t>8?8:t,i.blurY=n>8?8:n,i.quality=a>3?3:a}return __extends(t,e),t.prototype.toString=function(){var e=this;return e.type+e.blurX+e.blurY+e.quality},t.prototype.drawFilter=function(e){void 0===e&&(e=null);var n=this,a=n.blurX>>1;if(isNaN(a)||0>a)return!1;var i=n.blurY>>1;if(isNaN(i)||0>i)return!1;if(0==a&&0==i)return!1;var r=n.quality;(isNaN(r)||1>r)&&(r=1),r|=0,r>3&&(r=3),1>r&&(r=1);var o=e.data,s=0,l=0,c=0,u=0,h=0,d=0,p=0,f=0,_=0,v=0,m=0,g=0,y=0,x=0,b=0,E=a+a+1|0,w=i+i+1|0,T=0|e.width,M=0|e.height,F=T-1|0,C=M-1|0,I=a+1|0,L=i+1|0,R={r:0,b:0,g:0,a:0},S=R;for(c=1;E>c;c++)S=S.n={r:0,b:0,g:0,a:0};S.n=R;var O={r:0,b:0,g:0,a:0},D=O;for(c=1;w>c;c++)D=D.n={r:0,b:0,g:0,a:0};D.n=O;for(var k=null,A=0|t.MUL_TABLE[a],P=0|t.SHG_TABLE[a],U=0|t.MUL_TABLE[i],B=0|t.SHG_TABLE[i];r-- >0;){p=d=0;var N=A,X=P;for(l=M;--l>-1;){for(f=I*(g=o[0|d]),_=I*(y=o[d+1|0]),v=I*(x=o[d+2|0]),m=I*(b=o[d+3|0]),S=R,c=I;--c>-1;)S.r=g,S.g=y,S.b=x,S.a=b,S=S.n;for(c=1;I>c;c++)u=d+((c>F?F:c)<<2)|0,f+=S.r=o[u],_+=S.g=o[u+1],v+=S.b=o[u+2],m+=S.a=o[u+3],S=S.n;for(k=R,s=0;T>s;s++)o[d++]=f*N>>>X,o[d++]=_*N>>>X,o[d++]=v*N>>>X,o[d++]=m*N>>>X,u=p+((u=s+a+1)<F?u:F)<<2,f-=k.r-(k.r=o[u]),_-=k.g-(k.g=o[u+1]),v-=k.b-(k.b=o[u+2]),m-=k.a-(k.a=o[u+3]),k=k.n;p+=T}for(N=U,X=B,s=0;T>s;s++){for(d=s<<2|0,f=L*(g=o[d])|0,_=L*(y=o[d+1|0])|0,v=L*(x=o[d+2|0])|0,m=L*(b=o[d+3|0])|0,D=O,c=0;L>c;c++)D.r=g,D.g=y,D.b=x,D.a=b,D=D.n;for(h=T,c=1;i>=c;c++)d=h+s<<2,f+=D.r=o[d],_+=D.g=o[d+1],v+=D.b=o[d+2],m+=D.a=o[d+3],D=D.n,C>c&&(h+=T);if(d=s,k=O,r>0)for(l=0;M>l;l++)u=d<<2,o[u+3]=b=m*N>>>X,b>0?(o[u]=f*N>>>X,o[u+1]=_*N>>>X,o[u+2]=v*N>>>X):o[u]=o[u+1]=o[u+2]=0,u=s+((u=l+L)<C?u:C)*T<<2,f-=k.r-(k.r=o[u]),_-=k.g-(k.g=o[u+1]),v-=k.b-(k.b=o[u+2]),m-=k.a-(k.a=o[u+3]),k=k.n,d+=T;else for(l=0;M>l;l++)u=d<<2,o[u+3]=b=m*N>>>X,b>0?(b=255/b,o[u]=(f*N>>>X)*b,o[u+1]=(_*N>>>X)*b,o[u+2]=(v*N>>>X)*b):o[u]=o[u+1]=o[u+2]=0,u=s+((u=l+L)<C?u:C)*T<<2,f-=k.r-(k.r=o[u]),_-=k.g-(k.g=o[u+1]),v-=k.b-(k.b=o[u+2]),m-=k.a-(k.a=o[u+3]),k=k.n,d+=T}}},t.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],t.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t}(e.AObject);e.BlurFilter=i}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(e){t.call(this),this.rootContainer=null,this._stage=e}return __extends(n,t),n.prototype.begin=function(){var e=this,t=e.rootContainer;e._ctx.setTransform(1,0,0,1,0,0),""!=e._stage.bgColor?(e._ctx.fillStyle=e._stage.bgColor,e._ctx.fillRect(0,0,t.width+1,t.height+1)):e._ctx.clearRect(0,0,t.width+1,t.height+1)},n.prototype.beginMask=function(e){var t=this,n=!1;if(e.children&&e.children.length>0&&(e=e.children[0]),e._command){t._ctx.save(),t._ctx.globalAlpha=0;var a=e.cMatrix;t._ctx.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty);for(var i,r=e._command.length,o=0;r>o;o++)if(i=e._command[o],1==i[0]){n=!0;var s=i[2].length;0==s?t._ctx[i[1]]():2==s?t._ctx[i[1]](i[2][0],i[2][1]):4==s?t._ctx[i[1]](i[2][0],i[2][1],i[2][2],i[2][3]):5==s?t._ctx[i[1]](i[2][0],i[2][1],i[2][2],i[2][3],i[2][4]):6==s&&t._ctx[i[1]](i[2][0],i[2][1],i[2][2],i[2][3],i[2][4],i[2][5])}t._ctx.restore()}t._ctx.save(),n&&t._ctx.clip()},n.prototype.endMask=function(){this._ctx.restore()},n.prototype.draw=function(e,t){var n=this;if(e._cacheImg&&("IMG"!=e._cacheImg.nodeName||e._cacheImg.complete)){n._ctx.globalAlpha=e.cAlpha;var a=e.cMatrix;if(n._ctx.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty),0==t){if(e._cacheImg){var i=e.rect;i&&!e._isCache?n._ctx.drawImage(e._cacheImg,i.x,i.y,i.width,i.height,0,0,i.width,i.height):(n._ctx.translate(e._cacheX,e._cacheY),n._ctx.drawImage(e._cacheImg,0,0))}}else e._cacheImg&&(n._ctx.translate(e._cacheX,e._cacheY),n._ctx.drawImage(e._cacheImg,0,0))}},n.prototype.init=function(){var e=this;e.rootContainer||(e.rootContainer=document.createElement("canvas"),e._stage.rootDiv.appendChild(e.rootContainer));var t=e.rootContainer;e._ctx=t.getContext("2d")},n.prototype.reSize=function(){var t=this,n=t.rootContainer;n.width=t._stage.divWidth*e.devicePixelRatio,n.height=t._stage.divHeight*e.devicePixelRatio,n.style.width=t._stage.divWidth+"px",n.style.height=t._stage.divHeight+"px"},n}(e.AObject);e.CanvasRender=t}(annie||(annie={}));var annie;!function(e){var t=function(t){function n(e){t.call(this),this.rootContainer=null,this._maxTextureCount=32,this._uniformTexture=0,this._uniformMaskTexture=0,this._posAttr=0,this._textAttr=0,this._maskObjList=[],this._maskTexture=null,this._maskSrcTexture=null,this._textures=[],this._curTextureId=-1,this._stage=e}return __extends(n,t),n.prototype.begin=function(){var e=this,t=e._gl;if(""!=e._stage.bgColor){var n=e._stage.bgColor,a=parseInt("0x"+n.substr(1,2)),i=parseInt("0x"+n.substr(3,2)),r=parseInt("0x"+n.substr(5,2));t.clearColor(a/255,i/255,r/255,1)}else t.clearColor(0,0,0,0);t.clear(t.COLOR_BUFFER_BIT),e._maskObjList=[]},n.prototype.beginMask=function(e){var t=this,n=t._gl;n.bindFramebuffer(n.FRAMEBUFFER,t._maskFbo),n.viewport(0,0,1024,1024),n.disable(n.BLEND),0==t._maskObjList.length&&(n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.bindTexture(n.TEXTURE_2D,t._maskTexture),n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,0,0,1024,1024,0)),t._maskObjList.push(e),n.uniform1i(t._uMask,100*t._maskObjList.length),t.draw(e,1),n.bindTexture(n.TEXTURE_2D,t._maskTexture),n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,0,0,1024,1024,0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.uniform1i(t._uMask,t._maskObjList.length),n.viewport(0,0,t._dW,t._dH),n.enable(n.BLEND)},n.prototype.endMask=function(){var e=this,t=e._gl,n=e._maskObjList.length;if(n>1){e._maskObjList.pop();var a=e._maskObjList.concat();e._maskObjList.length=0;for(var i=0;i<a.length;i++)e.beginMask(a[i])}else t.uniform1i(e._uMask,0),e._maskObjList.length=0},n.prototype.reSize=function(){var t=this,n=t.rootContainer;n.width=t._stage.divWidth*e.devicePixelRatio,n.height=t._stage.divHeight*e.devicePixelRatio,n.style.width=t._stage.divWidth+"px",n.style.height=t._stage.divHeight+"px",t._gl.viewport(0,0,n.width,n.height),t._dW=n.width,t._dH=n.height,t._pMatrix=new Float32Array([1/t._dW*2,0,0,0,-1/t._dH*2,0,-1,1,1])},n.prototype._getShader=function(e){var t=this,n=t._gl,a="",i=null;return 0==e?(a="precision highp float;varying vec2 v_TC;varying vec2 v_MP;uniform sampler2D u_texture;uniform sampler2D u_maskTexture;uniform float u_A;uniform int u_Mask;void main() {if(u_Mask==0){gl_FragColor = texture2D(u_texture, v_TC)*u_A;}else if(u_Mask>=100){vec4 textColor = texture2D(u_texture, v_TC);gl_FragColor = texture2D(u_maskTexture, v_MP);if(textColor.a>0.0){if(u_Mask==100){gl_FragColor.r=textColor.a;}else if(u_Mask==200&&gl_FragColor.r>0.0){gl_FragColor.g=textColor.a;}else if(u_Mask==300&&gl_FragColor.r>0.0&&gl_FragColor.g>0.0){gl_FragColor.b=textColor.a;}else if(u_Mask==400&&gl_FragColor.r>0.0&&gl_FragColor.g>0.0&&gl_FragColor.b>0.0){gl_FragColor.a=textColor.a;}}}else{vec4 textColor=texture2D(u_maskTexture, v_MP);float maskStep=0.0;if(u_Mask==1){maskStep=textColor.r;}else if(u_Mask==2){maskStep=textColor.g;}else if(u_Mask==3){maskStep=textColor.b;}else if(u_Mask==4){maskStep=textColor.a;}gl_FragColor = texture2D(u_texture, v_TC)*u_A*maskStep;}}",i=n.createShader(n.FRAGMENT_SHADER)):(a="precision highp float;attribute vec2 a_P;attribute vec2 a_TC;varying vec2 v_TC;varying vec2 v_MP;uniform mat3 vMatrix;uniform mat3 pMatrix;void main() {gl_Position =vec4((pMatrix*vMatrix*vec3(a_P, 1.0)).xy, 1.0, 1.0);v_MP=(gl_Position.xy+vec2(1.0,1.0))*0.5;v_TC = a_TC;}",i=n.createShader(n.VERTEX_SHADER)),n.shaderSource(i,a),n.compileShader(i),n.attachShader(t._program,i),i},n.prototype.init=function(){var t=this;t.rootContainer||(t.rootContainer=document.createElement("canvas"),t._stage.rootDiv.appendChild(t.rootContainer));var n=t.rootContainer,a=n.getContext("webgl")||n.getContext("experimental-webgl");t._gl=a,t._program=a.createProgram();var i=t._program;t._getShader(0),t._getShader(1),a.linkProgram(i),a.useProgram(i),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),a.disable(a.DEPTH_TEST),a.enable(a.BLEND),a.disable(a.CULL_FACE),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),t._buffer=a.createBuffer(),t._pMI=a.getUniformLocation(t._program,"pMatrix"),t._vMI=a.getUniformLocation(t._program,"vMatrix"),t._uA=a.getUniformLocation(t._program,"u_A"),t._uMask=a.getUniformLocation(t._program,"u_Mask"),t._cM=new e.Matrix,t._maxTextureCount=3,t._uniformTexture=a.getUniformLocation(t._program,"u_texture"),t._uniformMaskTexture=a.getUniformLocation(t._program,"u_maskTexture"),t._posAttr=a.getAttribLocation(t._program,"a_P"),t._textAttr=a.getAttribLocation(t._program,"a_TC"),a.enableVertexAttribArray(t._posAttr),a.enableVertexAttribArray(t._textAttr),t.initMaskBuffer()},n.prototype.setBuffer=function(e,t){var n=this,a=n._gl;a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,t,a.STATIC_DRAW),a.vertexAttribPointer(n._posAttr,2,a.FLOAT,!1,16,0),a.vertexAttribPointer(n._textAttr,2,a.FLOAT,!1,16,8)},n.prototype.draw=function(e,t){var n=this;if(e._cacheImg&&("IMG"!=e._cacheImg.nodeName||e._cacheImg.complete)){var a,i=n._gl,r=e._glInfo,o=[0,0,r.x,r.y,r.pw,0,r.w,r.y,0,r.ph,r.x,r.h,r.pw,r.ph,r.w,r.h],s=e._cacheImg;s._annieType>0?(a=n._cM,a.identity(),2==s._annieType?(a.tx=2*e._cacheX,a.ty=2*e._cacheY):(a.tx=-s.width,a.ty=-s.height),a.prepend(e.cMatrix)):a=e.cMatrix;var l=new Float32Array([a.a,a.b,0,a.c,a.d,0,a.tx,a.ty,1]);i.uniform1i(n._uniformMaskTexture,n.activeTexture(n._maskTexture,!0)),i.uniform1i(n._uniformTexture,n.activeTexture(s.texture)),n.setBuffer(n._buffer,new Float32Array(o)),i.uniform1f(n._uA,e.cAlpha),i.uniformMatrix3fv(n._pMI,!1,n._pMatrix),i.uniformMatrix3fv(n._vMI,!1,l),i.drawArrays(i.TRIANGLE_STRIP,0,4)}},n.prototype.activeTexture=function(e,t){void 0===t&&(t=!1);var n=this,a=n._gl,i=-1,r=!1;if(t)i=0,n._textures[0]==e&&(r=!0);else{for(var o=1;o<n._maxTextureCount;o++){if(null==n._textures[o]){i=o;break}if(n._textures[o]==e){i=o,r=!0;break}}0>i&&(n._curTextureId<n._maxTextureCount-1?n._curTextureId++:n._curTextureId=1,i=n._curTextureId)}return a.activeTexture(a["TEXTURE"+i]),a.bindTexture(a.TEXTURE_2D,e),n._textures[i]=e,i},n.prototype.initMaskBuffer=function(){var e=this;e._maskFbo=e.createFramebuffer(1024,1024),e._maskSrcTexture=e._maskFbo.texture,e._maskTexture=e.createTexture(null,1024,1024)},n.prototype.createTexture=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=1),void 0===n&&(n=1);var a=this._gl,i=a.createTexture();a.bindTexture(a.TEXTURE_2D,i);var r,o,s=e;return e?(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e),o=e.width,r=e.height):(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t,n,0,a.RGBA,a.UNSIGNED_BYTE,null),o=t,r=n),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),i.bitmapData=s,i.width=o,i.height=r,a.bindTexture(a.TEXTURE_2D,null),i},n.prototype.updateTexture=function(e,t){var n=this,a=n._gl;a.bindTexture(a.TEXTURE_2D,e),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,t),a.bindTexture(a.TEXTURE_2D,null)},n.prototype.createFramebuffer=function(e,t){var n=this,a=n._gl,i=a.createFramebuffer();
i.width=e,i.height=t,a.bindFramebuffer(a.FRAMEBUFFER,i);var r=n.createTexture(null,e,t);return a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,r,0),i.texture=r,a.bindFramebuffer(a.FRAMEBUFFER,null),i},n.setDisplayInfo=function(e,t){if(e.stage&&1==e.stage.renderType){if(e.stage){var n=e._glInfo,a=e.stage.renderObj,i=e.rect,r=e._cacheImg;if(i)n.x=i.x/r.width,n.y=i.y/r.height,n.w=(i.x+i.width)/r.width,n.h=(i.y+i.height)/r.height,n.pw=i.width,n.ph=i.height;else{var o=e._cacheX,s=e._cacheY;n.x=o/r.width,n.y=s/r.height,n.w=(r.width-o)/r.width,n.h=(r.height-s)/r.height,n.pw=r.width-2*o,n.ph=r.height-2*s,r._annieType=t,r.texture&&a.updateTexture(r.texture,r)}}r.texture||(r.texture=a.createTexture(r))}},n}(e.AObject);e.WGRender=t}(annie||(annie={}));var annie;!function(e){var t=eval.bind(window),n=function(n){function a(){n.call(this),this.responseType=null,this.url="",this.method="get",this.data=null,this._fqs=function(e,t){var n=[];if(e)for(var a in e)n.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t&&(n=n.concat(t)),n.join("&")},this._fus=function(e,t){var n=this;if(null==t||""==t)return e;var a=[],i=e.indexOf("?");if(-1!=i){var r=e.slice(i+1);return a=a.concat(r.split("&")),e.slice(0,i)+"?"+n._fqs(t,a)}return e+"?"+n._fqs(t,a)}}return __extends(a,n),a.prototype.loadCancel=function(){var e=this;e._req&&e._req.abort()},a.prototype.load=function(n,a){void 0===a&&(a=!1);var i=this;if(i.loadCancel(),null==i.responseType||""==i.responseType){var r=n.split("."),o=r[r.length-1],s=o.split("?")[0].toLocaleLowerCase();"mp3"==s||"ogg"==s||"wav"==s?i.responseType="sound":"jpg"==s||"jpeg"==s||"png"==s||"gif"==s?i.responseType="image":"css"==s?i.responseType="css":"mp4"==s?i.responseType="video":"svg"==s?i.responseType="svg":"xml"==s?i.responseType="xml":"json"==s?i.responseType="json":"txt"==s?i.responseType="text":"js"==s?i.responseType="js":i.responseType="unKnow"}var l=null;i._req?l=i._req:(i._req=new XMLHttpRequest,l=i._req,l.timeout=5e3,l.withCredentials=!1,l.onprogress=function(e){!e||e.loaded>0&&0==e.total||i.dispatchEvent("onProgress",{loadedBytes:e.loaded,totalBytes:e.total})},l.onerror=function(e){c++,c>3?i.dispatchEvent("onError",e.message):(l.abort(),i.data?a?l.send(i.data):l.send(i._fqs(i.data,null)):l.send())},l.onreadystatechange=function(n){var a=n.target;if(4==a.readyState){var r=new e.Event("onComplete"),o=a.response;r.data={type:i.responseType,response:null};var s;switch(i.responseType){case"css":s=document.createElement("link"),s.rel="stylesheet",s.href=i.url;break;case"image":case"sound":case"video":var l=!0;"image"==i.responseType?(s=document.createElement("img"),s.onload=function(){l&&URL.revokeObjectURL(s.src),s.onload=null}):("sound"==i.responseType?s=document.createElement("AUDIO"):"video"==i.responseType&&(s=document.createElement("VIDEO")),s.preload=!0,s.load(),s.onloadeddata=function(){s.onloadeddata=null});try{s.src=URL.createObjectURL(o)}catch(c){l=!1,s.src=i.url}break;case"json":s=JSON.parse(o);break;case"xml":s=a.responseXML;break;case"js":t(o);break;case"text":case"unKnow":default:s=o}r.data.response=s,i.data=null,i.responseType="",i.dispatchEvent(r)}});var c=0;i.data&&"get"==i.method.toLocaleLowerCase()?(i.url=i._fus(n,i.data),i.data=null):i.url=n,"image"==i.responseType||"sound"==i.responseType||"video"==i.responseType?l.responseType="blob":l.responseType="text",l.open(i.method,i.url,!0),i.data?(l.setRequestHeader("Content-type","application/x-www-form-urlencoded;charset=UTF-8"),a?l.send(i.data):l.send(i._fqs(i.data,null))):l.send()},a}(e.EventDispatcher);e.URLLoader=n}(annie||(annie={}));var annie;!function(annie){var RESManager;!function(RESManager){function _loadConfig(){_JSONQueue.load(_domain+"resource/"+_loadSceneNames[_loadIndex]+"/"+_loadSceneNames[_loadIndex]+".res.json?t="+_time)}function onCFGComplete(e){var t=e.data.response;_currentConfig.push(t),_totalLoadRes+=t.length,_loadIndex++,_loadSceneNames[_loadIndex]?_loadConfig():(_loadIndex=0,_loadSinglePer=1/_totalLoadRes,_loadRes())}function _onRESProgress(e){_progressCallback&&_progressCallback(100*(_loadPer+e.data.loadedBytes/e.data.totalBytes*_loadSinglePer)>>0)}function _onRESComplete(e){if("js"!=e.data.type&&"css"!=e.data.type){var t=_currentConfig[_loadIndex][0].id,n=_loadSceneNames[_loadIndex];"sound"==e.data.type?res[n][t]=new annie.Sound(e.data.response):res[n][t]=e.data.response}_checkComplete()}function _checkComplete(){_loadedLoadRes++,_loadPer=_loadedLoadRes/_totalLoadRes,_currentConfig[_loadIndex].shift(),_currentConfig[_loadIndex].length>0?_loadRes():(_loadIndex++,_loadIndex==_loadSceneNames.length?(_isLoading=!1,_completeCallback()):_loadRes())}function _loadRes(){var e=_domain+_currentConfig[_loadIndex][0].src;_loaderQueue.load(e)}function isLoadedScene(e){return void 0!=res[e]&&null!=res[e]}function unLoadScene(sceneName,gl){if(void 0===gl&&(gl=null),gl)for(var item in res[sceneName])res[sceneName][item].nodeName&&"IMG"==res[sceneName][item].nodeName&&res[sceneName][item].texture&&gl.deleteTexture(res[sceneName][item].texture);delete res[sceneName];var scene=eval(sceneName);for(var i in scene)delete scene[i];eval(sceneName+"=null;")}function getMediaByName(e,t){var n=res;return n[e][t]?n[e][t]:null}function b(e,t){var n=res,a=!1;if(n[e][t])return new annie.Bitmap(n[e][t]);for(var i=0;n[e]["F2xSSIMG"+i];){var r=n[e]["F2xSSIMGData"+i];if(void 0!=r[t]){a=!0;var o=r[t],s=n[e]["F2xSSIMG"+i];return new annie.Bitmap(s,o)}i++}return null}function d(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),t&&(void 0!=t.x&&(e.x=t.x),void 0!=t.y&&(e.y=t.y),void 0!=t.a&&(e.scaleX=t.a),void 0!=t.b&&(e.scaleY=t.b),void 0!=t.r&&(e.rotation=t.r),void 0!=t.c&&(e.skewX=t.c),void 0!=t.d&&(e.skewY=t.d),void 0!=t.o&&(e.alpha=t.o),void 0!=t.v&&(e.visible=t.v)),n&&n.length>0){var a=0;for(e.filters=[];void 0!=n[a];)if(0==n[a])e.filters.push(new annie.ColorFilter(n[a+1],n[a+2],n[a+3],n[a+4],n[a+5],n[a+6],n[a+7],n[a+8])),a+=9;else if(1==n[a])e.filters.push(new annie.BlurFilter(n[a+1],n[a+2],n[a+3])),a+=4;else if(2==n[a]){var i=.5*(n[a+1]+n[a+2]),r=annie.Shape.getRGBA(n[a+4],n[a+5]),o=n[a+7]*Math.cos(n[a+6]/180*Math.PI),s=n[a+7]*Math.sin(n[a+6]/180*Math.PI);e.filters.push(new annie.ShadowFilter(r,o,s,i)),a+=8}else if(3==n[a]){var i=.5*(n[a+1]+n[a+2]),r=annie.Shape.getRGBA(n[a+4],n[a+5]);e.filters.push(new annie.ShadowFilter(r,0,0,i)),a+=6}else 4==n[a]&&(e.filters.push(new annie.ColorMatrixFilter(n[a+1],n[a+2],n[a+3],n[a+4])),a+=5)}}function t(e,t,n,a,i,r,o,s,l,c,u,h,d,p,f){void 0===h&&(h=!1),void 0===d&&(d=!1),void 0===p&&(p="single"),void 0===f&&(f=!1);var _;return 0==e||1==e?(_=new annie.TextField,_.text=t,_.font=i,_.size=n,_.lineWidth=s,_.lineHeight=c,_.textAlign=u,_.italic=h,_.bold=d,_.color=a,_.lineType=p):(_=new annie.InputText(p),_.initInfo(t,s,l,a,u,n,i,f,c/n),h&&_.setItalic(!0),d&&_.setBold(!0)),_}function sb(e,t){var n="_f2x_s"+t;if(res[e][n])return res[e][n];var a=null,i=b(e,t);return i?(a=i.rect?annie.Bitmap.convertToImage(i):i.bitmapData,res[e][n]=a,a):(trace("error:矢量位图填充时,未找到位图资源!"),null)}function s(e,t,n){var a=new annie.Shape;return t&&(0==t.type?a.beginFill(t.color):1==t.type?a.beginRadialGradientFill(t.gradient[0],t.gradient[1],t.points):2==t.type?a.beginLinearGradientFill(t.gradient[0],t.gradient[1],t.points):a.beginBitmapFill(sb(t.bitmapScene,t.bitmapName),t.matrix)),n&&(0==n.type?a.beginStroke(n.color,n.lineWidth):1==n.type?a.beginRadialGradientStroke(n.gradient[0],n.gradient[1],n.points,n.lineWidth):2==n.type?a.beginLinearGradientStroke(n.gradient[0],n.gradient[1],n.points,n.lineWidth):a.beginBitmapStroke(sb(n.bitmapScene,n.bitmapName),n.matrix,n.lineWidth)),0==e.type?a.decodePath(e.data):a.drawRoundRect(e.data.x,e.data.y,e.data.w,e.data.h,e.data.topLeftRadius,e.data.topRightRadius,e.data.bottomLeftRadius,e.data.bottomRightRadius),t&&a.endFill(),n&&a.endStroke(),a}function ajax(e){var t=new annie.URLLoader;t.method=void 0==e.type?"get":e.type,t.data=void 0==e.data?null:e.data,t.responseType=void 0==e.responseType?"text":e.responseType,void 0!=e.success&&t.addEventListener(annie.Event.COMPLETE,e.success),void 0!=e.error&&t.addEventListener(annie.Event.ERROR,e.error),t.load(e.url)}var res={},_isLoading,_loadSceneNames,_domain,_loadIndex,_totalLoadRes,_loadedLoadRes,_completeCallback,_progressCallback,_JSONQueue,_loaderQueue,_isInited,_currentConfig,_time,_loadPer,_loadSinglePer;RESManager.loadScene=function(e,t,n,a){if(void 0===a&&(a=""),_isLoading&&(_JSONQueue.loadCancel(),_loaderQueue.loadCancel()),_loadSceneNames=[],void 0==a&&(a=""),_domain=a,"string"==typeof e)isLoadedScene(e)||(_loadSceneNames.push(e),res[e]=new Object);else for(var i=e.length,r=0;i>r;r++)isLoadedScene(e[r])||(res[e[r]]=new Object,_loadSceneNames.push(e[r]));return 0==_loadSceneNames.length?void(n&&n()):(_isInited||(_time=(new Date).getTime(),_JSONQueue=new annie.URLLoader,_JSONQueue.addEventListener(annie.Event.COMPLETE,onCFGComplete),_loaderQueue=new annie.URLLoader,_loaderQueue.addEventListener(annie.Event.COMPLETE,_onRESComplete),_loaderQueue.addEventListener(annie.Event.PROGRESS,_onRESProgress)),_loadPer=0,_loadIndex=0,_totalLoadRes=0,_loadedLoadRes=0,_isLoading=!0,_completeCallback=n,_progressCallback=t,_currentConfig=[],void _loadConfig())},RESManager.isLoadedScene=isLoadedScene,RESManager.unLoadScene=unLoadScene,RESManager.getMediaByName=getMediaByName,RESManager.b=b,RESManager.d=d,RESManager.t=t,RESManager.s=s,RESManager.ajax=ajax}(RESManager=annie.RESManager||(annie.RESManager={}))}(annie||(annie={}));var annie;!function(e){var t=!0,n=function(e){function t(){e.call(this),this._currentFrame=0,this._totalFrames=0,this._isLoop=0,this._delay=0,this._isFront=!0,this._cParams=null,this._loop=!1}return __extends(t,e),t.prototype.init=function(e,t,n,a){void 0===a&&(a=!0);var i=this;i._currentFrame=1,i._totalFrames=30*t>>0,i.target=e,i._isTo=a,i._isLoop=0,i._startData={},i._disData={},i._delay=0,i._isFront=!0,i._ease=null,i._update=null,i._cParams=null,i._loop=!1,i._completeFun=null;for(var r in n)switch(r){case"useFrame":1==n[r]&&(i._totalFrames=t);break;case"yoyo":n[r]===!1?i._isLoop=0:n[r]===!0?i._isLoop=32767:i._isLoop=n[r];break;case"delay":i._delay=n[r];break;case"ease":i._ease=n[r];break;case"onUpdate":i._update=n[r];break;case"onComplete":i._completeFun=n[r];break;case"completeParams":i._cParams=n[r];break;case"loop":i._loop=n[r];break;default:"number"==typeof n[r]&&(a?(i._startData[r]=e[r],i._disData[r]=n[r]-e[r]):(i._startData[r]=n[r],i._disData[r]=e[r]-n[r]))}},t.prototype.update=function(){var e=this;if(e._isFront&&e._delay>0)return void e._delay--;var t=e._currentFrame/e._totalFrames;e._ease&&(t=e._ease(t));for(var n in e._disData)e.target[n]=e._startData[n]+e._disData[n]*t;e._update&&e._update();var i=e._completeFun,r=e._cParams;e._isFront?(e._currentFrame++,e._currentFrame>e._totalFrames&&(e._loop?e._currentFrame=1:e._isLoop>0?(e._isFront=!1,e._currentFrame=e._totalFrames,e._isLoop--):a.kill(e.getInstanceId()),i&&i.apply(null,r))):(e._currentFrame--,e._currentFrame<0&&(e._isLoop>0?(e._isFront=!0,e._currentFrame=1):a.kill(e.getInstanceId()),i&&i.apply(null,r)))},t}(e.AObject),a=function(){function e(){}return e.to=function(t,n,a){return e.createTween(t,n,a,!0)},e.from=function(t,n,a){return e.createTween(t,n,a,!1)},e.createTween=function(t,a,i,r){for(var o,s=e._tweenList.length,l=0;s>l;l++)if(t==e._tweenList[l].target){o=e._tweenList[l];break}return o||(s=e._tweenPool.length,s>0?(o=e._tweenPool[0],e._tweenPool.shift()):o=new n,e._tweenList.push(o)),o.init(t,a,i,r),o.getInstanceId()},e.killAll=function(){for(var t,n=e._tweenList.length,a=0;n>a;a++)t=e._tweenList[a],t.target=null,t._completeFun=null,t._cParams=null,t._update=null,t._ease=null,t._loop=!1,e._tweenPool.push(t);e._tweenList.length=0},e.kill=function(t){for(var n,a=e._tweenList.length,i=0;a>i;i++)if(n=e._tweenList[i],n.getInstanceId()==t){n.target=null,n._completeFun=null,n._cParams=null,n._update=null,n._ease=null,n._loop=null,e._tweenPool.push(n),e._tweenList.splice(i,1);break}},e.quadraticIn=function(e){return e*e},e.quadraticOut=function(e){return e*(2-e)},e.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},e.cubicIn=function(e){return e*e*e},e.cubicOut=function(e){return--e*e*e+1},e.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},e.quarticIn=function(e){return e*e*e*e},e.quarticOut=function(e){return 1- --e*e*e*e},e.quarticInOut=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},e.quinticIn=function(e){return e*e*e*e*e},e.quinticOut=function(e){return--e*e*e*e*e+1},e.quinticInOut=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},e.sinusoidalIn=function(e){return 1-Math.cos(e*Math.PI/2)},e.sinusoidalOut=function(e){return Math.sin(e*Math.PI/2)},e.sinusoidalInOut=function(e){return.5*(1-Math.cos(Math.PI*e))},e.exponentialIn=function(e){return 0===e?0:Math.pow(1024,e-1)},e.exponentialOut=function(e){return 1===e?1:1-Math.pow(2,-10*e)},e.exponentialInOut=function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},e.circularIn=function(e){return 1-Math.sqrt(1-e*e)},e.circularOut=function(e){return Math.sqrt(1- --e*e)},e.circularInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},e.elasticIn=function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},e.elasticOut=function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},e.elasticInOut=function(e){return 0===e?0:1===e?1:(e*=2,1>e?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1)},e.backIn=function(e){var t=1.70158;return e*e*((t+1)*e-t)},e.backOut=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},e.backInOut=function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.flush=function(){if(t)for(var n=e._tweenList.length,a=n-1;a>=0;a--)e._tweenList[a].update();t=!t},e._tweenPool=[],e._tweenList=[],e}();e.Tween=a}(annie||(annie={}));var annie;!function(e){function t(e){window.location.href=e}function n(e){var t=new XMLHttpRequest;t.open("get",e,!0),t.send()}e.debug=!1,e.version="1.0.2",e.devicePixelRatio=window.devicePixelRatio?window.devicePixelRatio:1,e.osType=function(){var e=navigator.userAgent.toLocaleLowerCase(),t=/android/,n=/iphone|ipod|ipad/;return t.test(e)?"android":n.test(e)?"ios":"pc"}(),e.StageScaleMode={EXACT_FIT:"exactFit",NO_BORDER:"noBorder",NO_SCALE:"noScale",SHOW_ALL:"showAll",FIXED_WIDTH:"fixedWidth",FIXED_HEIGHT:"fixedHeight"},e.navigateToURL=t,e.sendToURL=n,e.canHTMLTouchMove=!1;var a=null;e.toDisplayDataURL=function(t,n,i,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=""),a||(a=new e.CanvasRender(null)),a._stage=t,a.rootContainer=e.DisplayObject._canvas,t.stage||t.update();var o=t.getBounds(),s=n?n.width:o.width,l=n?n.height:o.height;a.rootContainer.width=s,a.rootContainer.height=l,a._ctx=a.rootContainer.getContext("2d"),""==r?a._ctx.clearRect(0,0,s,l):(a._ctx.fillStyle=r,a._ctx.fillRect(0,0,s,l));var c={p:t.parent,x:t.x,y:t.y,scX:t.scaleX,scY:t.scaleY,r:t.rotation,skX:t.skewX,skY:t.skewY};return t.parent=null,t.x=n?-n.x:0,t.y=n?-n.y:0,t.scaleX=t.scaleY=1,t.rotation=t.skewX=t.skewY=0,t.update(),t.render(a),t.parent=c.p,t.x=c.x,t.y=c.y,t.scaleX=c.scX,t.scaleY=c.scY,t.rotation=c.r,t.skewX=c.skX,t.skewY=c.skY,i||(i={type:"png"}),a.rootContainer.toDataURL("image/"+i.type,i.quality)}}(annie||(annie={}));var trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n in arguments)console.log(arguments[n])},globalDispatcher=new annie.EventDispatcher;document.ontouchmove=function(e){annie.canHTMLTouchMove&&annie.debug||e.preventDefault()};var Flash2x=annie.RESManager,F2xContainer=annie.Sprite,F2xMovieClip=annie.MovieClip,F2xText=annie.TextField,F2xInputText=annie.InputText,F2xBitmap=annie.Bitmap,F2xShape=annie.Shape;annie.Stage.addUpdateObj(annie.Tween),annie.Stage.flushAll();