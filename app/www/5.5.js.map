{"version":3,"sources":["webpack:///./client/wechat-login.js","webpack:///./client/inappTongji.js","webpack:///./client/res/hall@atlas_co0pxp.jpg","webpack:///./client/res/hall@atlas1.png","webpack:///./client/res/hall@atlas0.png","webpack:///./client/res/hall.fui"],"names":["shareUrl","tongji","window","require","me","Loader","laya","net","Handler","utils","wins","Wechat","appid","cordovaVar","name","substr","Page","opt","Laya","SoundManager","playMusic","_view","getChild","visible","cb","regAppIntf","loader","load","url","type","IMAGE","BUFFER","create","page","fairygui","UIPackage","addPackage","createObject","asCom","codePush","InstallMode","SyncStatus","notifyApplicationReady","getController","selectedIndex","asProgress","value","sync","status","ERROR","tipon","popup","UP_TO_DATE","enterlogin","installMode","IMMEDIATE","total","recv","text","quickLogin","localUser","JSON","parse","localStorage","getItem","e","accWechatIntf","openid","tokendata","token","err","r","normalLogin","entermain","scope","state","Date","auth","response","GRoot","inst","showModalWait","code","reason","setItem","stringify","closeModalWait","main","onClick","isInstalled","installed","appleProducts","actureMoney","inappPurchase","orderid","money","desc","beginCharge","Math","floor","inAppPurchase","buy","then","data","consume","productType","receipt","signature","getAjax","endCharge","catch","console","log","errorMessage","wxPay","_noop","order","startup_param","toString","sendPaymentRequest","cordova","device","platform","pay","toRuleString","rule","str","length","preInvite","v","shareObj","title","pan","description","dizhu","thumb","mediaTagName","media","Type","WEBPAGE","webpageUrl","invite","share","message","scene","Scene","SESSION","preShareResult","roomid","setnum","participants","winners","img","join","image","module","exports","Stat","TalkingDataGA","onStart","account","getAccount","id","setLevel","level","acount","setAccountName","nickname","setGameServer","setGender","TDGAGender","kGenderMale","n","Account","TDGAVirtualCurrency","onReward","tickets","payment","onChargeRequest","onChargeSuccess","tableid","TDGAItem","onUse","TDGAMission","onBegin","onCompleted","onEvent","user","tabledesc","table","msg","export"],"mappings":"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","file":"5.5.js?3f94f2cef50ffdce0e77","sourcesContent":["var shareUrl='http://a.mlinks.cc/AaIu';\r\nvar tongji=window.tongji=require('./inappTongji.js');\r\n\r\nvar me=require('./myself.js');\r\n\r\nvar Loader = laya.net.Loader;\r\nvar Handler = laya.utils.Handler;\r\n\r\nvar wins=require('./windows.js');\r\n\r\nvar Wechat,appid='wx5408a6af7cd795ad';\r\nfunction cordovaVar(name) {\r\n\treturn window[name]||window[name.substr(0, -1)][name];\r\n}\r\nclass Page {\r\n\tconstructor(opt) {\r\n\t\tthis.opt=opt;\r\n\t}\r\n\tstatic create(opt, cb) {\r\n\t\tWechat=window.Wechat;\r\n\t\tregAppIntf();\r\n\t\tif (typeof opt==='function') {cb=opt; opt={}}\r\n\t\tLaya.loader.load([\r\n\t\t\t{ url: require(\"./res/hall@atlas_co0pxp.jpg\"), type: Loader.IMAGE },\r\n\t\t\t{ url: require(\"./res/hall@atlas1.png\"), type: Loader.IMAGE },\r\n\t\t\t{ url: require(\"./res/hall@atlas0.png\"), type: Loader.IMAGE },\r\n\t\t\t{ url: require(\"./res/hall.fui\"), type: Loader.BUFFER }\r\n\t\t], Handler.create(null, function() {\r\n\t\t\tvar page=new Page(opt);\r\n\t\t\tfairygui.UIPackage.addPackage(\"hall\");\r\n\t\t\tvar _view = fairygui.UIPackage.createObject(\"牛牛\", \"Component6\").asCom;\r\n\t\t\tpage._view=_view;\r\n\t\t\tvar codePush=window.codePush=cordovaVar('codePush');\r\n\t\t\tvar InstallMode=window.InstallMode=cordovaVar('InstallMode');\r\n\t\t\tvar SyncStatus=window.SyncStatus=cordovaVar('SyncStatus');\r\n\t\t\tif (codePush) {\r\n\t\t\t\tcodePush.notifyApplicationReady();\r\n\t\t\t\t_view.getController('c1').selectedIndex=1;\r\n\t\t\t\t_view.getChild('n12').asProgress.value=0;\r\n\t\t\t\tcodePush.sync(function(status) {\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\tcase SyncStatus.ERROR:\r\n\t\t\t\t\t\ttipon('更新服务暂时不可用').popup();\r\n\t\t\t\t\tcase SyncStatus.UP_TO_DATE:\r\n\t\t\t\t\t\tenterlogin();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t,{installMode: InstallMode.IMMEDIATE}\r\n\t\t\t\t,function(total, recv) {\r\n\t\t\t\t\t_view.getChild('n13').text='发现新版本，正在更新';\r\n\t\t\t\t\t_view.getChild('n12').asProgress.value=total>0?recv/total:0;\r\n\t\t\t\t});\r\n\t\t\t\t// codePush.sync(function() {}, { updateDialog: true, installMode: InstallMode.IMMEDIATE });\r\n\t\t\t}\r\n\t\t\tfunction quickLogin() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar localUser=JSON.parse(localStorage.getItem('wechatUser'));\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tvar localUser=null;\r\n\t\t\t\t}\r\n\t\t\t\tif (localUser) {\r\n\t\t\t\t\treturn accWechatIntf('/weixin/ret', {openid:localUser.openid, tokendata:localUser.token, appid:appid}, function(err, r) {\r\n\t\t\t\t\t\tif (err) return normalLogin();\r\n\t\t\t\t\t\tentermain(err, r);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tnormalLogin();\r\n\t\t\t}\r\n\t\t\tfunction normalLogin() {\r\n\t\t\t\tvar scope = \"snsapi_userinfo\",\r\n\t\t\t\tstate = \"_\" + (+new Date());\r\n\t\t\t\tWechat.auth(scope, state, function (response) {\r\n\t\t\t\t\t// you may use response.code to get the access token.\r\n\t\t\t\t\t_view.getChild('n7').visible=false;\r\n\t\t\t\t\tfairygui.GRoot.inst.showModalWait();\r\n\t\t\t\t\taccWechatIntf('/weixin/ret', {code:response.code, appid:appid}, entermain);\r\n\t\t\t\t}, function (reason) {\r\n\t\t\t\t\ttipon(reason).popup();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfunction entermain(err, r) {\r\n\t\t\t\tlocalStorage.setItem('wechatUser', JSON.stringify(r));\r\n\t\t\t\tfairygui.GRoot.inst.closeModalWait();\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\t_view.getChild('n7').visible=true;\r\n\t\t\t\t\treturn tipon('服务器未启动').popup();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmain(r);\r\n\t\t\t}\r\n\t\t\tfunction enterlogin() {\r\n\t\t\t\t_view.getController('c1').selectedIndex=0;\r\n\t\t\t\t_view.getChild('n7').onClick(null, function() {\r\n\t\t\t\t\tif (!Wechat) return tipon('wechat plugin not installed').popup();\r\n\t\t\t\t\tWechat.isInstalled(function (installed) {\r\n\t\t\t\t\t\tif (!installed) return tipon('微信未安装').popup();\r\n\t\t\t\t\t\tquickLogin();\r\n\t\t\t\t\t}, function (reason) {\r\n\t\t\t\t\t\ttipon(reason).popup();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\t\t\t\t\r\n\t\t\t}\r\n\t\t\t//if (localStorage.getItem('wechatUser')) main(localStorage.getItem('wechatUser'));\r\n\t\t\tcb(null, page);\r\n\t\t}));\r\n\t}\r\n\r\n\tactive() {\r\n\t\tLaya.SoundManager.playMusic(require('./res/snd/bg-lobby.mp3'));\r\n\t\tthis._view.getChild('n7').visible=true;\r\n\t}\r\n}\r\n\r\nfunction regAppIntf() {\r\n\tvar appleProducts={'15':'apple.niuniu.5tickets', '30':'apple.niuniu.10tickets', '150':'apple.niuniu.50tickets'};\r\n\tvar actureMoney={'15':18, '30':30, '150':'148'};\r\n\tfunction inappPurchase(orderid, money, desc, cb) {\r\n\t\ttongji.beginCharge(orderid, actureMoney[money], Math.floor(money/3), desc, '苹果商店支付');\r\n\t\tinAppPurchase.buy(appleProducts[money]).then(function(data) {\r\n\t\t\tinAppPurchase.consume(data.productType, data.receipt, data.signature);\r\n\t\t\tdata.orderid=orderid;\r\n\t\t\tdata.actureMoney=actureMoney[money];\r\n\t\t\tgetAjax('/i/niuniu.app/pay/apple', data, function(err) {\r\n\t\t\t\tif (err) return tipon(err).popup();\r\n\t\t\t\telse tipon('购买成功').popup();\r\n\t\t\t\ttongji.endCharge(orderid, '苹果商店支付');\r\n\t\t\t})\r\n\t\t})\r\n\t\t.catch(function(err) {console.log(err); tipon('购买失败'+err.errorMessage).popup()});\r\n\t}\r\n\tfunction wxPay(orderid, money, desc, cb) {\r\n\t\t!cb && (cb=_noop);\r\n\t\ttongji.beginCharge(orderid, money, desc, '微信app支付');\r\n\t\taccWechatIntf('/weixin/getWechatpayParams', {appid:appid, order:orderid, money:money, openid:startup_param.openid},\r\n\t\tfunction(err, r) {\r\n\t\t\tif (err) return tipon(err.toString()).popup();\r\n\t\t\tWechat.sendPaymentRequest(r, function () {\r\n\t\t\t\ttipon('支付成功').popup();\r\n\t\t\t\ttongji.endCharge(orderid, '微信app支付');\r\n\t\t\t}, function (reason) {\r\n\t\t\t\ttipon(\"失败: \" + reason).popup();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tif (!!window.cordova && device.platform=='iOS') window.pay=inappPurchase;\r\n\telse window.pay=wxPay;\r\n\r\n\tfunction toRuleString(rule) {\r\n\t\tvar str='';\r\n\t\trule['10']&& (str+='五小牛 ');\r\n\t\trule['7']&& (str+='四炸牛 ');\r\n\t\trule['5']&& (str+='五花牛 ');\r\n\t\trule['4']&& (str+='四花牛 ');\r\n\t\tif (str.length==0) str='不带牛牛以上的牌型';\r\n\t\telse str='带'+str;\r\n\t\treturn str;\r\n\t}\r\n\t\r\n\twindow.preInvite=function(v, opt) {\r\n\t\t//inviteMsg={v:v, opt:opt};\r\n\t\tvar shareObj={\r\n\t\t\ttitle: '牛牛大作战，房号:'+v+'('+opt.pan+'局)',\r\n\t\t\tdescription: '轮庄，'+toRuleString(opt.rule)+', '+opt.dizhu+'底！',\r\n\t\t\tthumb: 'www/logo.png',\r\n\t\t\tmediaTagName: \"logo\",\r\n\t\t\tmedia: {\r\n\t\t\t\ttype: Wechat.Type.WEBPAGE,\r\n\t\t\t\twebpageUrl: shareUrl+'?room='+v,\r\n\t\t\t}\r\n\t\t};\r\n\t\twindow.invite=function() {\r\n\t\t\tWechat.share({\r\n\t\t\t\tmessage:shareObj,\r\n\t\t\t\tscene: Wechat.Scene.SESSION   // share to chatwindow\r\n\t\t\t}, function () {\r\n\t\t\t\ttongji.invite(v, '轮庄，'+toRuleString(opt.rule)+', '+opt.dizhu+'底！');\r\n\t\t\t}, function (reason) {\r\n\t\t\t\t//tipon(\"失败: \" + reason).popup();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\twindow.preShareResult=function(roomid, setnum, participants, winners, img) {\r\n\t\tvar shareObj={\r\n\t\t\ttitle: '牛牛大作战，房号:'+v+(setnum!=null?(', 第'+setnum+'局'):''),\r\n\t\t\tdescription: (participants||[]).join(',')+' 胜利者 '+(winners||[]).join(','),\r\n\t\t\tmedia:{\r\n\t\t\t\ttype:Wechat.Type.IMAGE,\r\n\t\t\t\timage:img\r\n\t\t\t}\r\n\t\t};\r\n\t\twindow.share=function() {\r\n\t\t\tWechat.share({\r\n\t\t\t\tmessage:shareObj,\r\n\t\t\t\tscene: Wechat.Scene.SESSION   // share to chatwindow\r\n\t\t\t}, function () {\r\n\t\t\t\ttongji.share();\r\n\t\t\t}, function (reason) {\r\n\t\t\t\t//tipon(\"失败: \" + reason).popup();\r\n\t\t\t});\t\t\r\n\t\t}\t\r\n\t}\r\n}\r\n\r\nmodule.exports=Page.create;\r\n\n\n\n// WEBPACK FOOTER //\n// ./client/wechat-login.js","class Stat {\n    constructor() {\n        TalkingDataGA.onStart('589819C1081F43868F6D16D1C5D9A98C', device.platform);\n    }\n    userin(me) {\n        var account=TalkingDataGA.getAccount(me.id);\n        account.setLevel(me.level);\n        acount.setAccountName(me.nickname);\n        account.setGameServer('通用');\n        account.setGender(TDGAGender.kGenderMale);\n\t}\n\tlevelup(n) {\n\t\tTalkingDataGA.Account.setLevel(n);\n\t}\n    reward(n, reason) {\n        TDGAVirtualCurrency.onReward(n, reason);\n    }\n\tbeginCharge(orderid, money, tickets, desc, payment) {\n\t\tif (typeof tickets=='string') {\n            payment=desc;\n\t\t\tdesc=tickets;\n\t\t\ttickets=Math.floor(money/3);\n\t\t}\n        TDGAVirtualCurrency.onChargeRequest(orderid,desc, money, 'CNY', tickets,payment);\n\t}\n\tendCharge(orderid) {\n\t\tTDGAVirtualCurrency.onChargeSuccess(orderid);\n\t}\n    startGame(tableid, name, tickets) {\n        TDGAItem.onUse(name, tickets);\n    }\n\tenterGame(tableid) {\n\t\tTDGAMission.onBegin(tableid.toString());\n\t}\n\tendGame(tableid) {\n    \tTDGAMission.onCompleted(tableid.toString());\n\t}\n\tshare() {\n\t\tTalkingDataGA.onEvent('share', {user:{id:me.id, nickname:me.nickname}});\n\t}\n\tinvite(tableid,tabledesc) {\n\t\tTalkingDataGA.onEvent('invite', {user:{id:me.id, nickname:me.nickname}, table:{id:tableid, msg:tabledesc}});\n\t}\n    event(name, data) {\n        TalkingDataGA.onEvent(name, (typeof data=='object'?data:{data:data}));\n    }\n}\n\nmodule.export=new Stat();\n\n\n// WEBPACK FOOTER //\n// ./client/inappTongji.js","module.exports = __webpack_public_path__ + \"hall@atlas_co0pxp.jpg?ca80718d7f5b0f37581ff48920637df6\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/res/hall@atlas_co0pxp.jpg\n// module id = 71\n// module chunks = 5","module.exports = __webpack_public_path__ + \"hall@atlas1.png?cbf00762020349dac42280956b7e01d6\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/res/hall@atlas1.png\n// module id = 72\n// module chunks = 5","module.exports = __webpack_public_path__ + \"hall@atlas0.png?1c1b59821d9d425fb3f3cbc5788ceeaf\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/res/hall@atlas0.png\n// module id = 73\n// module chunks = 5","module.exports = __webpack_public_path__ + \"hall.fui?811b8f1d9d1e7593f0b07d449c5a71f2\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./client/res/hall.fui\n// module id = 74\n// module chunks = 5"],"sourceRoot":""}